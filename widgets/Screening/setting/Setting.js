// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Screening/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(g,k,m,l,f,b,e,a,d,n){return g([k,m],{templateString:a,baseClass:"jimu-widget-screening-setting",postCreate:function(){this.own(e(this.okButton,"click",l.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new d(this.symbolParams,b.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new n({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!f.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(a){return a}})})},"widgets/Screening/setting/DownloadSettings":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList jimu/dijit/RadioBtn".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C,c,B,z,F,H,y,G,D,I){return g([u,k],{templateString:m,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",SizeName:"A4"},
"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],_printServiceChoiceList:[],
_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,constructor:function(c){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=this._tableHeaderColor=null;this._buddyTaskChoiceList=
{};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;f.mixin(this,c)},postCreate:function(){this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",
label:this.nls.units.centimeters}];var c,a,e,d,q;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var h=[];y.forEach(this.downloadOptions.layers,f.hitch(this,function(c){c=B({url:c.url+"?f\x3dpjson"});h.push(c)}));(new I(h)).then(f.hitch(this,function(c){y.forEach(c,f.hitch(this,function(c,a){c[0]?(c={version:c[1].currentVersion,capabilities:c[1].capabilities},
this.downloadOptions.layers[a]&&this._setFileOptionDataInTable(this.downloadOptions.layers[a],c)):c[1].name&&"Error"===c[1].name||(c={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[a].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[a],c))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();
this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(q=C.getPortal(this.appConfig.portalUrl).helperServices)&&q.printTask.url&&(this.printGPServiceTextBox.set("value",q.printTask.url),this._printTaskURL=q.printTask.url);this.reportSettings&&this.reportSettings.footnote&&""!==this.reportSettings.footnote&&(this.footnoteTextArea.value=
this.reportSettings.footnote);c={portalUrl:this.appConfig.portalUrl};this.own(b(this.extractDataTaskSetButton,"click",f.hitch(this,function(){a=new r(c);d=this._onSetButtonClick(a);this._attachExtractDataTaskGPSourceEvents(a,d)})));this.own(b(this.printGPServiceSetButton,"click",f.hitch(this,function(){e=new r(c);d=this._onSetButtonClick(e);this._attachPrintReportGPSourceEvents(e,d)})));this._initImageChooser();this._tableHeaderColor=this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);
this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(b(this.addCustomOptionButton,"click",f.hitch(this,function(){l.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||(this._isCustomOptionNoDefault&&this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=f.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(c,
a){this.own(b(c,"ok",f.hitch(this,function(c){c&&0<c.length&&c[0].url&&this._requestExtractDataTaskURLInfo(c[0].url,a)})));this.own(b(c,"cancel",f.hitch(this,function(){a.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(c,a){this.own(b(c,"ok",f.hitch(this,function(c){c&&0<c.length&&c[0].url?(this.printGPServiceTextBox.set("value",c[0].url),this._printTaskURL=c[0].url,this._clonedConfigurationCustomOptions=
null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");a.close()})));this.own(b(c,"cancel",f.hitch(this,function(){a.close()})))},_destroyLayouts:function(){n.empty(this.defaultLayoutTable);n.empty(this.customLayoutTable);n.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=
[];this._customLayoutTable&&n.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&n.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=new t({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,
title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",
width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(c,a){var b;b=this._syncEnableOptionTable.addRow({});b.success&&b.tr&&this.checkLayerForDownloadOptions({url:c.url,id:c.id,layerName:c.layerName,
allowDownload:c.allowDownload,layerVersion:a.version,capabilities:a.capabilities},b.tr.rowIndex)},checkLayerForDownloadOptions:function(c,a){var b,d;d=this._getTableRow(a);d.success&&d.tr&&(b={url:c.url,layerName:c.layerName,id:c.id,allowDownload:c.hasOwnProperty("allowDownload")?c.allowDownload:!0},this._addLayerTitle(d.tr,c.layerName),this._addFileOption(d.tr,1),b.downloadingFileOption=[],b.downloadingFileOption.push("csv"),1<c.capabilities.split("Sync").length&&10.4<=c.layerVersion&&(this._addFileOption(d.tr,
2),b.downloadingFileOption.push("filegdb"),D.isHostedService(c.url)&&(this._addFileOption(d.tr,3),b.downloadingFileOption.push("shapefile"))),this._addAllowDownloadCheckbox(d.tr,b),this._setLayerDownloadInfo(b,a),this.loadingIndicator.hide())},_getTableRow:function(c){-1<c&&this._syncEnableOptionTable.tbody.rows[c]?(c={tr:this._syncEnableOptionTable.tbody.rows[c],success:!0},this._removeFileOptions(c.tr)):c=this._syncEnableOptionTable.addRow({});return c},_setLayerDownloadInfo:function(c,a){-1<a?
this._layers.splice(a,1,c):this._layers.push(c)},_addLayerTitle:function(c,a){if(c=e(".simple-table-cell",c)[0])c.innerHTML=a},_removeFileOptions:function(c){var a;c=e(".simple-table-cell",c);for(a=1;4>a;a++)l.remove(c[a],"esriCTAvailableDownloadOption")},_addFileOption:function(c,a){(c=e(".simple-table-cell",c)[a])&&l.add(c,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(c,d){var q;if(c=e(".simple-table-cell",c)[4])n.empty(c),q=new v({checked:d.allowDownload,"class":"esriCTAllowDownloadCheckbox"}),
q.placeAt(c),this.own(b(q,"change",f.hitch(this,function(){d.allowDownload=a.get(q,"checked")})))},_attachDownloadOptionEvent:function(){var c,a;a=e("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;c=e("input",this.downloadOptionForm);y.forEach(c,f.hitch(this,function(c){this.own(b(c,"click",f.hitch(this,function(b){c.value!==a&&(this._chooseDownloadOption(b.currentTarget.value,!1),a=b.currentTarget.value)})))}))},_chooseDownloadOption:function(c,a){switch(c){case "syncEnable":this.syncEnableRadioButton.set("checked",
!0);l.remove(this.downloadOptionTable,"esriCTHidden");l.add(this.extractDataTaskInputContainer,"esriCTHidden");a&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);l.add(this.downloadOptionTable,"esriCTHidden");l.remove(this.extractDataTaskInputContainer,"esriCTHidden");a&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",
!0),l.add(this.downloadOptionTable,"esriCTHidden"),l.add(this.extractDataTaskInputContainer,"esriCTHidden"),a&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(c){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[c]);this._layers.splice(c,1)},rowUp:function(c){var a,b;-1<c&&this._syncEnableOptionTable.tbody.rows[c+1]&&(d.place(this._syncEnableOptionTable.tbody.rows[c],this._syncEnableOptionTable.tbody.rows[c+1],"after"),
this._syncEnableOptionTable.updateUI(),a=this._layers[c],b=this._layers[c+1],this._layers.splice(c,2,b,a))},rowDown:function(c){var a,b;c<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[c-1]&&(d.place(this._syncEnableOptionTable.tbody.rows[c],this._syncEnableOptionTable.tbody.rows[c-1],"before"),this._syncEnableOptionTable.updateUI(),a=this._layers[c],b=this._layers[c-1],this._layers.splice(c-1,2,a,b))},_onSetButtonClick:function(c){return new q({titleLabel:this.nls.downloadTab.setGPTaskTitle,
width:830,height:560,content:c})},_requestExtractDataTaskURLInfo:function(c,a){var b;b=!1;this.loadingIndicator.show();B({url:c+"?f\x3dpjson"}).then(f.hitch(this,function(d){(b=this._validateExtractDataTask(d))?(this.extractDataTaskTextBox.set("value",c),this._extractDataTaskURL=c):(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");a.close();this.loadingIndicator.hide()}),f.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);
this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();a.close()}))},_validateExtractDataTask:function(c){var a,b,d;a=b=d=!1;return c&&"esriExecutionTypeAsynchronous"===c.executionType&&(y.forEach(c.parameters,f.hitch(this,function(c){switch(c.name){case "Area_of_Interest":a=this._checkAOIParam(c);break;case "Feature_Format":b=this._checkFeatureFormatParam(c);break;case "Output_Zip_File":d=this._checkOutputParam(c)}})),a&&b&&d)?!0:!1},_checkAOIParam:function(c){return"GPFeatureRecordSetLayer"===
c.dataType?c.defaultValue&&"esriGeometryPolygon"!==c.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(c){var a;a=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===c.dataType&&c.choiceList&&0<c.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),-1<c.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),a=!0),-1<c.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),
a=!0),a):!1},_checkOutputParam:function(c){return"GPDataFile"===c.dataType?!0:!1},_showMessage:function(c){(new w({message:c})).message=c},getDownloadingFileOptions:function(){var c,a;a=[];c=e("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===c?a=this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===c&&(a=this._extractDataTaskDownloadOptions);return a},_getSyncEnableDownloadingOptions:function(c){var a;a=[];y.some(c,f.hitch(this,function(c){c.allowDownload&&
y.some(c.downloadingFileOption,f.hitch(this,function(c){-1===a.indexOf(c)&&a.push(c)}))}));return a},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:""},getReportTitle:function(){return this.reportTitleTextBox.value},getTableHeaderColor:function(){var c=this._tableHeaderColor.color.toHex();return c?c:""},getFootnoteForReport:function(){return this.footnoteTextArea.value?this.footnoteTextArea.value:""},_initImageChooser:function(){this.logoChooser=new x({cropImage:!1,
showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[x.GIF,x.PNG,x.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();l.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var c,b;c=this.folderUrl+"/images/default-logo.png";this.reportSettings&&this.reportSettings.logo&&(b=this.reportSettings.logo,-1<b.indexOf("${appPath}")?(c=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),c=p.substitute(b,
{appPath:c})):c=b);a.set(this.imageChooserPreview,"src",c)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(c){c?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),
this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(a,b){b=n.create("table",{cellspacing:"0",cellpadding:"0"},b);b=n.create("tr",{style:"height:30px"},b);n.create("td",{},b);b=n.create("td",{},b);b=n.create("div",{"class":"esriCTColorChooserNode"},b);b=new c(null,n.create("div",{},b));b.setColor(new h(a));return b},_addFieldsRow:function(c,a){var b,d,q,e,h,f,r,A;b=this._customLayoutTable.addRow({});
b.success&&b.tr&&(b=b.tr,d=z(".simple-table-cell",b),e=d[0],h=d[1],f=d[2],r=d[3],d=c.Width,q=c.Height,A=null!==d&&""!==d&&void 0!==d||null!==q&&""!==q&&void 0!==q?c.PageUnits?c.PageUnits:null:null,this._displayLayout(e,b,c.SizeName),this._displayWidth(h,b,d,a),this._displayHeight(f,b,q,a),this._displayPageUnits(r,A,b))},_emptyDefaultDropDown:function(){for(var c in this._defaultOptions)this._defaultOptions.hasOwnProperty(c)&&G.PageSizes[this._defaultOptions[c].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.removeOption({label:c,
value:c})},_addOptionsInDefaultDropdown:function(){for(var c in this._defaultOptions)this._defaultOptions.hasOwnProperty(c)&&G.PageSizes[this._defaultOptions[c].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:c,value:c});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){y.forEach(this._customDropdownOption,f.hitch(this,function(c){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:c.value,
value:c.value})}));this._defaultPrintTemplateDropdownOption=[];y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,f.hitch(this,function(c){this._defaultPrintTemplateDropdownOption.push({label:c.value,value:c.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){var c;this._customLayoutTable&&(c=this._customLayoutTable.getRows(),y.forEach(c,f.hitch(this,function(c){var a=!1;D.has("ie")||D.has("edge")?y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,f.hitch(this,
function(b){b.value===c.customOptionLayoutDropdownObj.value&&(a=!0)})):a=this._defaultPrintTemplateDropdownOptionObj.options.find(function(a){return a.value===c.customOptionLayoutDropdownObj.value});a||this._defaultPrintTemplateDropdownOptionObj.addOption({label:c.customOptionLayoutDropdownObj.value,value:c.customOptionLayoutDropdownObj.value})})))},_displayLayout:function(c,a,d){d=new F({"class":"esriCTFieldChooserDropdown",options:f.clone(this._customDropdownOption),value:d});d.placeAt(c);this.own(b(d,
"MouseEnter",f.hitch(this,function(c){this._lastSelectedCustomDropdownRow=c.currentTarget.parentNode.parentNode})));this.own(b(d,"click",f.hitch(this,function(c){this._lastSelectedCustomDropdownRow=c.currentTarget.parentNode.parentNode})));this.own(b(d,"change",f.hitch(this,function(c){this._buddyTaskChoiceList[c]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[c].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",
this._buddyTaskChoiceList[c].pageSize[0]),this._buddyTaskChoiceList[c].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",this._buddyTaskChoiceList[c].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));d.startup();a.customOptionLayoutDropdownObj=d},_displayWidth:function(c,a,b,d){d||isNaN(parseFloat(b))||(b=parseFloat(b));b=new H({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:b,required:!0});b.placeAt(c);b.startup();a.customOptionWidthTextbox=b},_displayHeight:function(c,a,b,d){d||isNaN(parseFloat(b))||(b=
parseFloat(b));b=new H({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,value:b,required:!0});b.placeAt(c);b.startup();a.customOptionHeightTextbox=b},_displayPageUnits:function(c,a,b){a=new F({"class":"esriCTFieldChooserDropdown",options:f.clone(this._pageSize),required:!0,value:a});a.placeAt(c);a.startup();b.customOptionPageUnitsDropdownObj=a},_getDistinctFieldsOptionsObj:function(c){var a=[];y.forEach(c,f.hitch(this,
function(c){a.push({label:this._entireFieldObj[c].alias||this._entireFieldObj[c].name,value:c})}));return a},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=new F({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&
null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){l.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");l.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_enableAddCustomLayoutButton:function(){l.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");l.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_fetchChoiceList:function(){this.loadingIndicator.show();B({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(f.hitch(this,function(c){this._extractChoiceList(c);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(c):(this._disableAddCustomLayoutButton(),
this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),f.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);this.loadingIndicator.hide()}))},_extractChoiceList:function(c){y.forEach(c.parameters,f.hitch(this,function(c){"Layout_Template"===c.name&&"Layout Template"===c.displayName&&(this._printServiceChoiceList=c.choiceList)}))},_checkBuddyTask:function(){B({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(f.hitch(this,function(c){if(1<c.tasks.length){for(var a,b=0;b<c.tasks.length;b++)if(-1!==this._buddyTaskEndPoint.indexOf(c.tasks[b])){a=c.tasks[b];break}a?this._executeBuddyTaskSync(a):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):
(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),f.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(c){B({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+c+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(f.hitch(this,function(c){0<c.results[0].value.length?
(this._enableAddCustomLayoutButton(),y.forEach(c.results[0].value,f.hitch(this,function(c){this._buddyTaskChoiceList[c.layoutTemplate]=c})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),f.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=new t({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},
{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);d.setStyle(this._customLayoutTable.domNode,{height:"100%"});this._customLayoutTable.startup();this.own(b(this._customLayoutTable,"row-delete",f.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();
this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){y.forEach(this._clonedConfigurationCustomOptions.customOptions,f.hitch(this,function(c){this._addFieldsRow(c,!0)}))},_addCustomOptionsInTable:function(){var c=this._customDropdownOption[0].value,a,b,d,q;d=b=null;q=this._pageSize[0].value;this._buddyTaskChoiceList[c]&&(b=this._buddyTaskChoiceList[c].pageSize[1],d=this._buddyTaskChoiceList[c].pageSize[0],this._buddyTaskChoiceList[c]&&this._buddyTaskChoiceList[c].pageUnits&&
(q=this._buddyTaskChoiceList[c].pageUnits));var e={};e[c]={Height:b,Width:d,SizeName:c,MapLayout:c,PageUnits:q};this._addFieldsRow(e[c],!1);D.has("ie")||D.has("edge")?y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,f.hitch(this,function(b){b.value===c&&(a=b)})):a=this._defaultPrintTemplateDropdownOptionObj.options.find(function(a){return a.value===c});a||this._defaultPrintTemplateDropdownOptionObj.addOption({label:c,value:c,selected:!1})},_createCustomOptionDropdownList:function(){var c;
c=!1;y.forEach(this._printServiceChoiceList,f.hitch(this,function(a){var b=f.clone(a);if("MAP_ONLY"!==b){if(this._defaultOptions[b]){c=!0;var d=this._defaultOptions[b];this._defaultPrintTemplateDropdownOption.push({label:G.PageSizes[d.SizeName].SizeName+" "+G.Orientation[d.Orientation].Text,value:a})}this._defaultOptions[b]||this._customDropdownOption.push({value:b,label:b})}}));this._clonedConfigurationCustomOptions&&y.forEach(this._clonedConfigurationCustomOptions.customOptions,f.hitch(this,function(c){this._defaultPrintTemplateDropdownOption.push({label:c.SizeName,
value:c.SizeName})}));if(!(c||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var a in this._defaultOptions)this._defaultOptions.hasOwnProperty(a)&&G.PageSizes[this._defaultOptions[a].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:a,value:a})},getCustomOptions:function(){var c;c=[];if(this._customLayoutTable){var a=
this._customLayoutTable.getRows();y.forEach(a,f.hitch(this,function(a){c.push({SizeName:a.customOptionLayoutDropdownObj.value,Width:a.customOptionWidthTextbox.getValue(),Height:a.customOptionHeightTextbox.getValue(),MapLayout:a.customOptionLayoutDropdownObj.value,PageUnits:a.customOptionPageUnitsDropdownObj.value})}))}return c},validateCustomOptions:function(){var c,a;c=[];this._customLayoutTable&&(a=this._customLayoutTable.getRows(),y.forEach(a,f.hitch(this,function(a){a.customOptionWidthTextbox.isValid()||
c.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}));a.customOptionHeightTextbox.isValid()||c.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}));a.customOptionPageUnitsDropdownObj.isValid()||c.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}))})));
if(0<c.length)return c;y.forEach(a,f.hitch(this,function(a){c.push({SizeName:a.customOptionLayoutDropdownObj.value})}));(a=this._getDuplicateValue(c))&&0<a.length?(c=[],c.push(p.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,{duplicateValueSizeName:a[0].SizeName}))):c=[];return c},_getDuplicateValue:function(c){var a=0,b,d=c.length;for(a;a<d;a++){b=c[a];var q;q=D.has("ie")||D.has("edge")?Object.create(c):Object.assign([],c);q.splice(a,1);b=this._filterArray(q,b);if(0<b.length)break}return b},
_filterArray:function(c,a){return c.filter(function(c){return Object.keys(a).every(function(b){return c[b]===a[b]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&this._defaultPrintTemplateDropdownOptionObj.closeDropDown();var c;this._customLayoutTable&&(c=this._customLayoutTable.getRows(),y.forEach(c,f.hitch(this,function(c){c.customOptionLayoutDropdownObj.closeDropDown();
c.customOptionPageUnitsDropdownObj.closeDropDown()})))}})})},"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils".split(" "),function(g,k,m,l,f,b,e,a,d,n,p,h){return g([k,m,l,d],{templateString:f,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",
nls:null,multiple:!1,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=h.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var a=[];this.portalRadio.checked?a=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.gpcUrl.getSelectedItems());return a},startup:function(){this._started||(this.inherited(arguments),this.gpcPortal.startup(),this.gpcUrl.startup());this._started=
!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked()},_createGpChooserFromPortal:function(){this.gpcPortal=new n({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(a(this.gpcPortal,"next",b.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;
this._updateOperationTip()})));this.own(a(this.gpcPortal,"back",b.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(a(this.gpcPortal,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.gpcPortal,"cancel",b.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},
_createGpServiceChooserContent:function(){this.gpcUrl=new p({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(a(this.gpcUrl,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.gpcUrl,"cancel",b.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var a="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=a;e.setAttr(this.portalRadio,
"id","portalRadio_"+this._getRandomString());e.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=a;e.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());e.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onRadioClicked:function(){e.setStyle(this.hflcContainer,"display","none");e.setStyle(this.flscContainer,"display","none");this.portalRadio.checked?(e.setStyle(this.hflcContainer,
"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(e.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(b.hitch(this,function(){this.gpcUrl.focusInput()}),50));this._updateOperationTip()},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var a=this.gpcPortal.browserContainer;a.style.top=0;var b=this.operationTip.clientHeight;19<=b&&(a.style.top=
b-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),function(g,
k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q){return g([k,m,l,h],{templateString:f,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=b.mixin({},window.jimuNls.common);this.portalUrl=r.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new v({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(d(this.selector,"item-selected",b.hitch(this,this._onItemSelected)));this.own(d(this.selector,"none-item-selected",b.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=b.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){e.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){e.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();e.setStyle(this.btnOk,"display","none");e.setStyle(this.btnNext,"display","block");e.setStyle(this.btnBack,"display","none");e.addClass(this.btnOk,"jimu-state-disabled");e.setStyle(this.selectorContainer,"display","block");e.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&
this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();a&&(this._reset(),e.setStyle(this.btnNext,"display","none"),e.setStyle(this.btnBack,"display","block"),e.setStyle(this.btnOk,"display","block"),e.addClass(this.btnOk,"jimu-state-disabled"),e.setStyle(this.selectorContainer,"display","none"),e.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(a.url||a.item).then(b.hitch(this,function(){0<this.getSelectedItems().length&&e.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?e.removeClass(this.btnOk,"jimu-state-disabled"):e.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C,c,B,z){return g([m,l,f,e],{templateString:b,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=x.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";n.forEach(this.itemTypes,a.hitch(this,function(c,a){this._itemTypes+='"'+c+'"';a!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";n.forEach(this.typeKeywords,a.hitch(this,function(c,a){this._typeKeywords+='"'+c+'"';a!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var c=this._getPortalUrl();this.portal=q.getPortal(c);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=r.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=r.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new B({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(t(this.tab,"tabChanged",a.hitch(this,function(c){p.setStyle(this.signinSection,"display","none");c!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){p.setStyle(this.signinSection,"display","none");var c=v(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);w.userHaveSignInPortal(this._getPortalUrl())?c.style("display",
"block"):(c.style("display","none"),this._isPublicTabShow||p.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){r.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);r.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var c=this._getPortalUrl(),c=x.getServerByUrl(c);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var a=!1;x.isArcGIScom(c)?(a=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=c,a=this.showOnlineItems?!1:!0);a&&(this.onlinePublicRaido.disabled=!0,p.setStyle(this.onlinePublicRaido,"display","none"),p.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var c="esri_"+(d.locale&&d.locale.slice(0,2)||"en").toLowerCase(),b=n.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
a.hitch(this,function(a){return a!==c})),q="";n.forEach(b,a.hitch(this,function(c){q+=" -owner:"+c+" "}));b=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(b=" orgid:"+this.portal.user.orgId+" ");b=b+this._itemTypeQueryString+" AND access:public "+q+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:b});this._filterPublicPortalQuery=this._getQuery({q:b,basicQ:b});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(c){return a.mixin({start:1,num:16,f:"json"},c||{})},_getPortalUrl:function(){return x.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(t(this.publicPortalItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(t(this.publicOnlineItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(t(this.organizationItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(t(this.groupItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));
this.own(t(this.mycontentItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(t(this.publicPortalItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(t(this.publicOnlineItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(t(this.organizationItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(t(this.groupItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(t(this.mycontentItemTable,"update",a.hitch(this,this._onItemTableUpdate)));
var c=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",c),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(t(this.portalPublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this.own(t(this.onlinePublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(c){(c=c&&a.trim(c))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=c+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=c+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(t(this.groupsSelect,"change",a.hitch(this,this._onGroupsSelectChange)));var c=x.getServerByUrl(this._getPortalUrl());x.isArcGIScom(c)&&(c="ArcGIS.com");w.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(c){if(c=c&&a.trim(c)){if(this._allOrganizationQuery){var b=
this._allOrganizationQuery.q;b&&(this._filterOrganizationQuery.q=c+" "+b,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(c){if(c=c&&a.trim(c)){if(this._allMyContentQuery){var b=this._allMyContentQuery.q;b&&(this._filterMyContentQuery.q=c+" "+b,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(c){if(c=c&&a.trim(c)){if(this._allGroupQuery){var b=this._allGroupQuery.q;b&&(this._filterGroupQuery.q=c+" "+b,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var c=this._getPortalUrl();q.getPortal(c).getUser().then(a.hitch(this,function(c){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(c),
this._searchMyContent(c),this._searchGroups(c))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(c){this.organizationItemTable.clear();c=" orgid:"+c.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var a=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:c});this._filterOrganizationQuery=this._getQuery({q:c});this.organizationItemTable.set("portalUrl",a);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(c){this.mycontentItemTable.clear();var a=this._getPortalUrl();c="owner:"+c.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:c});this._filterMyContentQuery=this._getQuery({q:c});this.mycontentItemTable.set("portalUrl",
a);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(c){this._resetGroupsSection();p.setStyle(this.groupsSection,"display","block");c=c.getGroups();if(0<c.length){p.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();p.empty(this.groupsSelect);for(var a=0;a<c.length;a++){var b=c[a];p.create("option",{value:b.id,innerHTML:b.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(c.length)},_resetGroupsSection:function(){p.setStyle(this.groupsSection,
"display","none");p.empty(this.groupsSelect);p.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();p.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(c){0===c?p.setStyle(this.groupsSection,"top","15px"):p.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var c=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===c)p.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{p.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var a=this._getPortalUrl(),c="group:"+c+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:c});this._filterGroupQuery=this._getQuery({q:c});this.groupItemTable.set("portalUrl",a);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(c){var a=
p.hasClass(c,"jimu-state-active");v(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");a&&p.addClass(c,"jimu-state-active");(c=this.getSelectedItem())?this.emit("item-selected",c):this.emit("none-item-selected")},getSelectedItem:function(){var c=null,b=v(".item.jimu-state-active",this.domNode);0<b.length&&(c=a.mixin({},b[0].item));return c}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r){return g([k,m,l,b],{templateString:f,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&
0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=t.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){d.setStyle(this.domNode,"display","block")},hide:function(){d.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=e.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&
(this.allItemsShelter.show(),v.getPortal(this.portalUrl).queryItems(this.query).then(e.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),e.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=e.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&
0<this.filteredQuery.start&&(this.filteredItemShelter.show(),v.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(e.hitch(this,function(b){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=b.nextStart,this._createItems(b,this.filteredItemsTbody),this._filterItemCallback())}),e.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(d.setStyle(this.filteredItemsTableDiv,"display","block"),d.setStyle(this.searchNoneTipSection,"display","none")):(d.setStyle(this.filteredItemsTableDiv,"display","none"),d.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){d.empty(this.allItemTbody)},clearFilteredItemsSection:function(){d.empty(this.filteredItemsTbody)},showAllItemsSection:function(){d.setStyle(this.allItemsSection,
"display","block");d.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){d.setStyle(this.allItemsSection,"display","none");d.setStyle(this.filteredItemsSection,"display","block");d.setStyle(this.filteredItemsTableDiv,"display","block");d.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return u.isScrollToBottom(a)},_createItems:function(b,h){b=b.results;var q=a.map(this.types,e.hitch(this,function(c){return c.toLowerCase()}));b=a.filter(b,e.hitch(this,function(c){c=c.type&&c.type.toLowerCase()||"";return 0<=a.indexOf(q,c)}));if(0!==b.length){var f,c=p("td.empty",h),r;if(0<c.length){var n=Math.min(b.length,c.length),w=b.splice(0,n);for(r=0;r<n;r++){var u=c[r];f=this._createItem(w[r]);d.place(f,u);d.removeClass(u,"empty")}}if(0!==
b.length){c=Math.ceil(b.length/2);for(r=0;r<c;r++)for(f=d.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),d.place(f,h),n=p("td",f),w=0;w<n.length;w++)u=n[w],(f=b[2*r+w])?(f=this._createItem(f),d.place(f,u)):d.addClass(u,"empty");this.emit("update")}}},_getItemCount:function(a){return p(".item",a).length},_createItem:function(a){var b=d.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.item=a;var e=p(".item-thumbnail",b)[0],h=p(".item-name",b)[0],c=p(".item-type-owner",b)[0],q=p(".item-date",b)[0],f=p(".item-details",b)[0],r=p(".none-thumbnail-tip",b)[0];if(!a.thumbnailUrl){var n=this._defaultThumbnail[a.type];n&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+n)}a.thumbnailUrl?d.setStyle(e,"backgroundImage","url("+a.thumbnailUrl+")"):r.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(q=p(".item-info",b)[0],this.onCreateItemContent(a,q)):(h.innerHTML=
a.title,h.title=h.innerHTML,c.innerHTML=a.type+" by "+a.owner,c.title=c.innerHTML,e=new Date,e.setTime(a.modified),q.innerHTML=e.toLocaleString(),q.title=q.innerHTML,f.innerHTML=this.nls.moreDetails,f.href=a.detailsPageUrl||"#");return b},_onItemsTableClicked:function(a){var b=a.target||a.srcElement;a=null;d.hasClass(b,"item-thumbnail")?a=b.parentNode:d.hasClass(b,"none-thumbnail-tip")&&(a=b.parentNode.parentNode);a&&(b=d.hasClass(a,"jimu-state-active"),p(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
b?d.removeClass(a,"jimu-state-active"):d.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var a=null,b=p(".item.jimu-state-active",this.domNode);0<b.length&&(a=e.mixin({},b[0].item));return a}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(g,k,m,l,f){return g([k],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=f.getGpServiceBrowserRule()},getSelectedItems:function(){var b=this.inherited(arguments);return b=l.map(b,m.hitch(this,function(b){return{name:b.name,url:b.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t){return g([k,m,l,f],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);e.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(a){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new d;a&&"string"===typeof a&&a.replace(/\/*$/g,"")||this._def.reject();a=a.replace(/\/*$/g,"");a=b.trim(a);var e=a.match(/^http(s?):\/\//gi);e&&0<e.length||
(a="http://"+a);if(!(0>=a.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=a))return a=this._getRootItem(),a=v.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,a):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,a):this._searchFolderServiceUrl(this._currentUrl,a),this.shelter.show(),a.then(b.hitch(this,function(a){this.domNode&&this.shelter.hide();var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&
b[0].select();this._def.resolve(a)}),b.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(a){return this.rule.getItem(a)},_getSubItemUrls:function(a){return this.rule.getSubItemUrls(a)},_getSubItems:function(e){var h=new d;this._getSubItemUrls(e).then(b.hitch(this,function(d){d=a.map(d,b.hitch(this,function(a){return this._getItem(a)}));n(d).then(b.hitch(this,function(d){d=a.filter(d,b.hitch(this,
function(a){return a&&"object"===typeof a}));h.resolve(d)}),b.hitch(this,function(a){h.reject(a)}))}),b.hitch(this,function(a){h.reject(a)}));return h},_selectFirstLeafTreeNodeWidget:function(){var a=this.tree.getAllLeafTreeNodeWidgets();1===a.length&&a[0].select()},isLeafItem:function(a){return 0<=this.rule.leafTypes.indexOf(a.type)},isServiceTypeSupported:function(a){return this.rule.isServiceTypeSupported(a)},_getStringEndWith:function(a,b){var d="",e=a.indexOf(b);0<=e&&(d=a.slice(0,e+b.length));
return d},_isUrlContainsServiceType:function(a){return this.rule.isUrlContainsServiceType(a)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(e,h){var f=new d;this._getRestInfo(e).then(b.hitch(this,function(q){if(this.domNode){var r=[];a.map(q.folders,b.hitch(this,function(c){var f={name:c,type:"folder",url:e+"/"+c,parent:h.id};this._addItem(f);
var q=new d;this._doSearchFolderServiceUrl(f.url,f.id).then(b.hitch(this,function(c){0<c.length?a.forEach(c,b.hitch(this,function(c){c.parent=f.id;this._addItem(c)})):this._removeItem(f.id);q.resolve()}),b.hitch(this,function(c){q.reject(c)}));r.push(q);return q}));a.forEach(q.services,b.hitch(this,function(c){if(this.isServiceTypeSupported(c.type)){c=e+"/"+c.name+"/"+c.type;var a=new d;this.rule.getItem(c).then(b.hitch(this,function(c){c&&(c.parent=h.id,this._addItem(c));a.resolve()}),b.hitch(this,
function(c){console.error(c);a.reject(c)}));r.push(a)}}));n(r).then(b.hitch(this,function(){this.domNode&&f.resolve()}),b.hitch(this,function(c){console.error(c);this.domNode&&f.reject(c)}))}}),b.hitch(this,function(a){console.error(a);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:a})}));return f},_searchFolderServiceUrl:function(e,h){var f=new d;this._doSearchFolderServiceUrl(e,h).then(b.hitch(this,function(d){this.domNode&&(a.forEach(d,b.hitch(this,function(a){a.parent=h.id;this._addItem(a)})),
f.resolve())}),b.hitch(this,function(a){console.error(a);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:a})}));return f},_doSearchFolderServiceUrl:function(e){var h=new d,f=this._getBaseServiceUrl();this._getRestInfo(e).then(b.hitch(this,function(d){d=d.services;var e=[];d&&0<d.length&&a.forEach(d,b.hitch(this,function(c){this.isServiceTypeSupported(c.type)&&(c=this.rule.getItem(f+"/"+c.name+"/"+c.type),e.push(c))}));n(e).then(b.hitch(this,function(c){c=a.filter(c,b.hitch(this,function(c){return c}));
h.resolve(c)}),b.hitch(this,function(c){console.error(c);h.reject(c)}))}),b.hitch(this,function(a){console.error(a);h.reject(a)}));return h},_searchServiceUrl:function(e,h){var f=new d;this._getSubItems(e).then(b.hitch(this,function(d){d&&0<d.length?(a.forEach(d,b.hitch(this,function(a){a.parent=h.id;this._addItem(a)})),f.resolve()):this._getItem(e).then(b.hitch(this,function(a){a&&(a.parent=h.id,this._addItem(a));f.resolve()}),b.hitch(this,function(a){f.reject(a)}))}),b.hitch(this,function(a){f.reject(a)}));
return f},_getRestInfo:function(a){var e=new d;this.rule.getRestInfo(a).then(b.hitch(this,function(a){this.domNode&&e.resolve(a)}),b.hitch(this,function(a){this.domNode&&e.reject(a)}));return e},_clear:function(){var d=this._store.query({parent:"root"});a.forEach(d,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_removeItem:function(a){this._store.remove(a)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var a=this._getRootItem(),a=new p({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new h(a);a=new u({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:a,showRoot:!1,style:{width:"100%"},isLeafItem:b.hitch(this,this.isLeafItem),onOpen:b.hitch(this,function(a,b){this._onTreeOpen(a,b);
this.emit("tree-open",a,b)}),onClick:b.hitch(this,function(a,b,d){this._onTreeClick(a,b,d);this.emit("tree-click",a,b,d)}),getIconStyle:b.hitch(this,function(a,b){var d=null;if(!a)return null;var e={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},c=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),h=this._getIconImageName(a,b);h||("folder"===a.type?h=b?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(h=b?"folder_open_default.png":"folder_close_default.png"));h&&(e.backgroundImage="url("+c+"/css/images/"+h+")",d=e);return d})});e.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,b){var d="";"function"===typeof this.rule.getIconImageName&&(d=this.rule.getIconImageName(a,b));return d},_mayHaveChildren:function(a){return"root"===a.type?!0:!this.isLeafItem(a)},_onTreeOpen:function(d,e){"root"===d.id||0<this._store.query({parent:d.id}).length||
d.checking||d.checked||(d.checking=!0,this._getSubItems(d.url).then(b.hitch(this,function(e){a.forEach(e,b.hitch(this,function(a){a.parent=d.id;this._addItem(a)}));d.checking=!1;d.checked=!0}),b.hitch(this,function(a){console.error(a);d.checking=!1;d.checked=!0})))},_onTreeClick:function(a,b,d){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(g,k,m,l,f,b,e){return m("dijit.tree.ObjectStoreModel",e,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){f.mixin(this,a);this.childrenCache={}},getRoot:function(a,d){if(this.root)a(this.root);else{var e=this.store.query(this.query);e.then&&this.own(e);b(e,f.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];a(this.root);e.observe&&e.observe(f.hitch(this,
function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(a,d,e){var n=this.store.getIdentity(a);if(this.childrenCache[n])b(this.childrenCache[n],d,e);else{var h=this.childrenCache[n]=this.store.getChildren(a);h.then&&this.own(h);h.observe&&this.own(h.observe(f.hitch(this,function(d,e,n){this.onChange(d);e!=n&&b(h,f.hitch(this,"onChildrenChange",a))}),!0));b(h,d,e)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},
newItem:function(a,b,e,f){return this.store.put(a,{parent:b,before:f})},pasteItem:function(a,b,e,p,h,u){var d=new l;if(b===e&&!p&&!u)return d.resolve(!0),d;b&&!p?this.getChildren(b,f.hitch(this,function(h){h=[].concat(h);var f=g.indexOf(h,a);h.splice(f,1);this.onChildrenChange(b,h);d.resolve(this.store.put(a,{overwrite:!0,parent:e,oldParent:b,before:u,isCopy:!1}))})):d.resolve(this.store.put(a,{overwrite:!0,parent:e,oldParent:b,before:u,isCopy:!0}));return d},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t){var r=g([v._TreeNode,h],{templateString:l,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
b.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=b.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=b.toDom('\x3cinput type\x3d"checkbox" /\x3e');b.addClass(this.checkNode,"jimu-tree-check-node");b.place(this.checkNode,this.contentNode,"first");this.own(p(this.checkNode,"click",f.hitch(this,this._onClick)));this.isLeaf?this.groupId?b.setStyle(this.checkNode,"display","none"):b.setStyle(this.checkNode,"display",
"inline"):b.setStyle(this.checkNode,"display","none");this.isLeaf?b.addClass(this.domNode,"jimu-tree-leaf-node"):b.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,b.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,b.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||
a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(f.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return g([v,h],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId=
"tree_"+t.getRandomString()},postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-tree");this.own(n.before(this,"onClick",f.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&b.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=this.getAllTreeNodeWidgets();return e.map(a,f.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},
getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=e.filter(a,f.hitch(this,function(a){return a.checkNode.checked}));return e.map(a,f.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=e.map(b,f.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return e.filter(b,f.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),d=0;d<b.length;d++){var e=u.byNode(b[d]);
if(e.item.id.toString()===a.toString())return e}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return e.filter(a,f.hitch(this,function(a){return a.isLeaf}))},getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return e.map(a,f.hitch(this,function(a){return u.byNode(a)}))},isLeafItem:function(a){return a&&
a.isLeaf},_getAllTreeNodeDoms:function(){return d(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new r(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,d,e){d.isLeaf&&(b.hasClass(e.target||
e.srcElement,"jimu-tree-check-node")||(this.multiple?d.toggleSelect():this.selectNodeWidget(d)));return arguments},_onCheckNodeClick:function(b,d,e){!this.multiple&&d&&this.unselectAllLeafNodeWidgets();a.stop(e);this.focusNode(b);setTimeout(f.hitch(this,function(){d?this.selectNodeWidget(b):b.unselect();this.onClick(b.item,b,e)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();e.forEach(a,f.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C,c,B,z,F,H,y,G,D,I,L,K,M,O,P,Q){function E(c){return r.delegate(c.promise||c,{addCallback:function(c){this.then(c)},addErrback:function(c){this.otherwise(c)}})}var N=l("dijit._TreeNode",[H,y,G,D,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(c){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=c;this._set("label",c);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:K,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(c){var a=Math.max(c,0)*this.tree._nodePixelIndent+"px";n.set(this.domNode,
"backgroundPosition",a+" 0px");n.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",a);g.forEach(this.getChildren(),function(a){a.set("indent",c+1)});this._set("indent",c)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(c){var a=this.tree,b=a.model;a._v10Compat&&c===b.root&&(c=null);this._applyClassAndStyle(c,"icon","Icon");this._applyClassAndStyle(c,"label","Label");this._applyClassAndStyle(c,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(c,b,d){var e="_"+b+"Class";b+="Node";var h=this[e];this[e]=this.tree["get"+d+"Class"](c,this.isExpanded);a.replace(this[b],this[e]||"",h||"");n.set(this[b],this.tree["get"+d+"Style"](c,this.isExpanded)||{})},_updateLayout:function(){var c=this.getParent(),c=!c||!c.rowNode||"none"==c.rowNode.style.display;a.toggle(this.domNode,"dijitTreeIsRoot",c);a.toggle(this.domNode,"dijitTreeIsLast",!c&&!this.getNextSibling())},_setExpando:function(c){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];c=c?0:this.isExpandable?this.isExpanded?1:2:3;a.replace(this.expandoNode,b[c],b);this.expandoNodeText.innerHTML=["*","-","+","*"][c]},expand:function(){if(this._expandDeferred)return E(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");a.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var c=h.wipeIn({node:this.containerNode,duration:F.defaultDuration}),b=this._expandDeferred=new f(function(){c.stop()});k.after(c,"onEnd",function(){b.resolve(!0)},!0);c.play();return E(b)},collapse:function(){if(this._collapseDeferred)return E(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");a.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var c=h.wipeOut({node:this.containerNode,duration:F.defaultDuration}),b=this._collapseDeferred=new f(function(){c.stop()});k.after(c,"onEnd",
function(){b.resolve(!0)},!0);c.play();return E(b)},indent:0,setChildItems:function(c){var a=this.tree,d=a.model,h=[],f=a.focusedChild,A=this.getChildren();g.forEach(A,function(c){G.prototype.removeChild.call(this,c)},this);this.defer(function(){g.forEach(A,function(c){if(!c._destroyed&&!c.getParent()){var b=function(c){var e=d.getIdentity(c.item),h=a._itemNodesMap[e];1==h.length?delete a._itemNodesMap[e]:(e=g.indexOf(h,c),-1!=e&&h.splice(e,1));g.forEach(c.getChildren(),b)};a.dndController.removeTreeNode(c);
b(c);if(a.persist){var h=g.map(c.getTreePath(),function(c){return a.model.getIdentity(c)}).join("/"),A;for(A in a._openedNodes)A.substr(0,h.length)==h&&delete a._openedNodes[A];a._saveExpandedNodes()}a.lastFocusedChild&&!e.isDescendant(a.lastFocusedChild.domNode,a.domNode)&&delete a.lastFocusedChild;f&&!e.isDescendant(f.domNode,a.domNode)&&a.focus();c.destroyRecursive()}})});this.state="Loaded";c&&0<c.length?(this.isExpandable=!0,g.forEach(c,function(c){var b=d.getIdentity(c),e=a._itemNodesMap[b],
f;if(e)for(var A=0;A<e.length;A++)if(e[A]&&!e[A].getParent()){f=e[A];f.set("indent",this.indent+1);break}f||(f=this.tree._createTreeNode({item:c,tree:a,isExpandable:d.mayHaveChildren(c),label:a.getLabel(c),labelType:a.model&&a.model.labelType||"text",tooltip:a.getTooltip(c),ownerDocument:a.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir,indent:this.indent+1}),e?e.push(f):a._itemNodesMap[b]=[f]);this.addChild(f);(this.tree.autoExpand||this.tree._state(f))&&h.push(a._expandNode(f))},this),g.forEach(this.getChildren(),
function(c){c._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);c=b(h);this.tree._startPaint(c);return E(c)},getTreePath:function(){for(var c=this,a=[];c&&c!==this.tree.rootNode;)a.unshift(c.item),c=c.getParent();a.unshift(this.tree.rootNode.item);return a},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(c){this.inherited(arguments);var a=this.getChildren();0==a.length&&(this.isExpandable=!1,
this.collapse());g.forEach(a,function(c){c._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(c){this.labelNode.setAttribute("aria-selected",c?"true":"false");a.toggle(this.rowNode,"dijitTreeRowSelected",c)},focus:function(){B.focus(this.focusNode)}});u("dojo-bidi")&&N.extend({_setTextDirAttr:function(c){!c||this.textDir==c&&this._created||(this._set("textDir",c),this.applyTextDir(this.labelNode),g.forEach(this.getChildren(),function(a){a.set("textDir",
c)},this))}});var J=l("dijit.Tree",[H,L,y,I],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:M,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(c,a){w.publish(this.id,r.mixin({tree:this,event:c},a||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new f;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(q(this.containerNode,
q.selector(".dijitTreeNode",x.enter),function(c){a._onNodeMouseEnter(z.byNode(this),c)}),q(this.containerNode,q.selector(".dijitTreeNode",x.leave),function(c){a._onNodeMouseLeave(z.byNode(this),c)}),q(this.containerNode,q.selector(".dijitTreeRow",c.press),function(c){a._onNodePress(z.getEnclosingWidget(this),c)}),q(this.containerNode,q.selector(".dijitTreeRow",c),function(c){a._onClick(z.getEnclosingWidget(this),c)}),q(this.containerNode,q.selector(".dijitTreeRow","dblclick"),function(c){a._onDblClick(z.getEnclosingWidget(this),
c)}));this.model||this._store2model();this.own(k.after(this.model,"onChange",r.hitch(this,"_onItemChange"),!0),k.after(this.model,"onChildrenChange",r.hitch(this,"_onItemChildrenChange"),!0),k.after(this.model,"onDelete",r.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){r.isString(this.dndController)&&(this.dndController=r.getObject(this.dndController));for(var b={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(b[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=E(this.pendingCommandsPromise);this.onLoadDeferred.then(r.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;v.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var c={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(c.mayHaveChildren=r.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(c.getChildren=r.hitch(this,function(c,a,b){this.getItemChildren(this._v10Compat&&c===this.model.root?null:c,a,b)}));this.model=new P(c);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(r.hitch(this,function(c){var a=this.rootNode=this.tree._createTreeNode({item:c,tree:this,isExpandable:!0,label:this.label||this.getLabel(c),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(a.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(a.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(a.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
a.labelNode.setAttribute("role","presentation"),a.labelNode.removeAttribute("aria-selected"),a.containerNode.setAttribute("role","tree"),a.containerNode.setAttribute("aria-expanded","true"),a.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(a.domNode);c=this.model.getIdentity(c);this._itemNodesMap[c]?this._itemNodesMap[c].push(a):this._itemNodesMap[c]=[a];a._updateLayout();this._expandNode(a).then(r.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),r.hitch(this,function(c){console.error(this,": error loading root: ",c)}))},getNodesByItem:function(c){if(!c)return[];c=r.isString(c)?c:this.model.getIdentity(c);return[].concat(this._itemNodesMap[c])},_setSelectedItemAttr:function(c){this.set("selectedItems",[c])},_setSelectedItemsAttr:function(c){var a=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(r.hitch(this,function(){var b=
g.map(c,function(c){return!c||r.isString(c)?c:a.model.getIdentity(c)}),d=[];g.forEach(b,function(c){d=d.concat(a._itemNodesMap[c]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(c){return c.length?E(this.set("paths",[c]).then(function(c){return c[0]})):E(this.set("paths",[]).then(function(c){return c[0]}))},_setPathsAttr:function(c){function a(c,b){var e=c.shift(),h=g.filter(b,function(c){return c.getIdentity()==e})[0];if(h)return c.length?d._expandNode(h).then(function(){return a(c,
h.getChildren())}):h;throw new J.PathError("Could not expand path at "+e);}var d=this;return E(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return b(g.map(c,function(c){c=g.map(c,function(c){return c&&r.isObject(c)?d.model.getIdentity(c):c});if(c.length)return a(c,[d.rootNode]);throw new J.PathError("Empty path");}))}).then(function(c){d.set("selectedNodes",c);return d.paths}))},_setSelectedNodeAttr:function(c){this.set("selectedNodes",[c])},_setSelectedNodesAttr:function(c){this.dndController.setSelection(c)},
expandAll:function(){function c(d){return a._expandNode(d).then(function(){var a=g.filter(d.getChildren()||[],function(c){return c.isExpandable});return b(g.map(a,c))})}var a=this;return E(c(this.rootNode))},collapseAll:function(){function c(d){var e=g.filter(d.getChildren()||[],function(c){return c.isExpandable}),e=b(g.map(e,c));return!d.isExpanded||d==a.rootNode&&!a.showRoot?e:e.then(function(){return a._collapseNode(d)})}var a=this;return E(c(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(c){return this.model.getLabel(c)},getIconClass:function(c,a){return!c||this.model.mayHaveChildren(c)?a?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(c,a){(c=this._getNext(a))&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(c,a){if(c=a.getPreviousSibling())for(a=c;a.isExpandable&&a.isExpanded&&
a.hasChildren();)a=a.getChildren(),a=a[a.length-1];else if(c=a.getParent(),this.showRoot||c!==this.rootNode)a=c;a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(c,a){a.isExpandable&&!a.isExpanded?this._expandNode(a):a.hasChildren()&&(a=a.getChildren()[0])&&a.isTreeNode&&this.focusNode(a)},_onLeftArrow:function(c,a){a.isExpandable&&a.isExpanded?this._collapseNode(a):(c=a.getParent())&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)},focusLastChild:function(){var c=this._getLast();
c&&c.isTreeNode&&this.focusNode(c)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var c=this.rootNode;c.isExpanded;){var a=c.getChildren();if(!a.length)break;c=a[a.length-1]}return c},_getNext:function(c){if(c.isExpandable&&c.isExpanded&&c.hasChildren())return c.getChildren()[0];for(;c&&c.isTreeNode;){var a=c.getNextSibling();if(a)return a;c=c.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(c,a){return e.isDescendant(c,
a.expandoNode)||e.isDescendant(c,a.expandoNodeText)},_onNodePress:function(c,a){this.focusNode(c)},__click:function(c,a,b,d){var e=this.isExpandoNode(a.target,c);c.isExpandable&&(b||e)?this._onExpandoClick({node:c}):(this._publish("execute",{item:c.item,node:c,evt:a}),this[d](c.item,c,a),this.focusNode(c));a.stopPropagation();a.preventDefault()},_onClick:function(c,a){this.__click(c,a,this.openOnClick,"onClick")},_onDblClick:function(c,a){this.__click(c,a,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(c){c=
c.node;this.focusNode(c);c.isExpanded?this._collapseNode(c):this._expandNode(c)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(c){v.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(c)},_getRootOrFirstNode:function(){v.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(c){c._expandNodeDeferred&&
delete c._expandNodeDeferred;if("Loading"!=c.state&&c.isExpanded){var a=c.collapse();this.onClose(c.item,c);this._state(c,!1);this._startPaint(a);return a}},_expandNode:function(c){if(c._expandNodeDeferred)return c._expandNodeDeferred;var a=this.model,b=c.item,d=this;c._loadDeferred||(c.markProcessing(),c._loadDeferred=new f,a.getChildren(b,function(a){c.unmarkProcessing();c.setChildItems(a).then(function(){c._loadDeferred.resolve(a)})},function(a){console.error(d,": error loading "+c.label+" children: ",
a);c._loadDeferred.reject(a)}));a=c._loadDeferred.then(r.hitch(this,function(){var a=c.expand();this.onOpen(c.item,c);this._state(c,!0);return a}));this._startPaint(a);return a},focusNode:function(c){var a=this.domNode.scrollLeft;this.focusChild(c);this.domNode.scrollLeft=a},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(c){var a=this.model.getIdentity(c);if(a=this._itemNodesMap[a]){var b=this.getLabel(c),d=this.getTooltip(c);g.forEach(a,function(a){a.set({item:c,
label:b,tooltip:d});a._updateItemClasses(c)})}},_onItemChildrenChange:function(c,a){c=this.model.getIdentity(c);(c=this._itemNodesMap[c])&&g.forEach(c,function(c){c.setChildItems(a)})},_onItemDelete:function(c){c=this.model.getIdentity(c);var a=this._itemNodesMap[c];a&&(g.forEach(a,function(c){this.dndController.removeTreeNode(c);var a=c.getParent();a&&a.removeChild(c);this.lastFocusedChild&&!e.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&
!e.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();c.destroyRecursive()},this),delete this._itemNodesMap[c])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var c=m(this.cookieName);c&&g.forEach(c.split(","),function(c){this._openedNodes[c]=!0},this)}},_state:function(c,a){if(!this.persist)return!1;var b=g.map(c.getTreePath(),function(c){return this.model.getIdentity(c)},this).join("/");if(1===arguments.length)return this._openedNodes[b];a?this._openedNodes[b]=
!0:delete this._openedNodes[b];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var c=[],a;for(a in this._openedNodes)c.push(a);m(this.cookieName,c.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!r.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},
resize:function(c){c&&d.setMarginBox(this.domNode,c);this._nodePixelIndent=d.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(r.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(c){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var a=r.hitch(this,function(){this._outstandingPaintOperations--;
0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});C(c,a,a)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(c){return new N(c)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):
this.focusFirstChild()}});u("dojo-bidi")&&J.extend({_setTextDirAttr:function(c){c&&this.textDir!=c&&(this._set("textDir",c),this.rootNode.set("textDir",c))}});J.PathError=p("TreePathError");J._TreeNode=N;return J})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(g,k,m,l){return m("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,
constructor:function(f){l.mixin(this,f);this.connects=[];f=this.store;if(!f.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");f.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([k.after(f,"onNew",l.hitch(this,"onNewItem"),!0),k.after(f,"onDelete",l.hitch(this,"onDeleteItem"),!0),k.after(f,"onSet",l.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=this.connects.pop();)f.remove()},getRoot:function(f,
b){this.root?f(this.root):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];f(this.root)}),onError:b})},mayHaveChildren:function(f){return g.some(this.childrenAttrs,function(b){return this.store.hasAttribute(f,b)},this)},getChildren:function(f,b,e){var a=this.store;if(a.isItemLoaded(f)){for(var d=[],n=0;n<this.childrenAttrs.length;n++)var p=
a.getValues(f,this.childrenAttrs[n]),d=d.concat(p);var h=0;this.deferItemLoadingUntilExpand||g.forEach(d,function(b){a.isItemLoaded(b)||h++});0==h?b(d):g.forEach(d,function(f,n){a.isItemLoaded(f)||a.loadItem({item:f,onItem:function(a){d[n]=a;0==--h&&b(d)},onError:e})})}else{var u=l.hitch(this,arguments.callee);a.loadItem({item:f,onItem:function(a){u(a,b,e)},onError:e})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},getIdentity:function(f){return this.store.getIdentity(f)},
getLabel:function(f){return this.labelAttr?this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,b,e){var a={parent:b,attribute:this.childrenAttrs[0]},d;this.newItemIdAttr&&f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,onItem:function(n){n?this.pasteItem(n,null,b,!0,e):(d=this.store.newItem(f,a))&&void 0!=e&&this.pasteItem(d,b,b,!1,e)}}):(d=this.store.newItem(f,a))&&void 0!=e&&this.pasteItem(d,b,b,!1,e)},pasteItem:function(f,b,
e,a,d){var n=this.store,p=this.childrenAttrs[0];b&&g.forEach(this.childrenAttrs,function(d){if(n.containsValue(b,d,f)){if(!a){var e=g.filter(n.getValues(b,d),function(a){return a!=f});n.setValues(b,d,e)}p=d}});if(e)if("number"==typeof d){var h=n.getValues(e,p).slice();h.splice(d,0,f);n.setValues(e,p,h)}else n.setValues(e,p,n.getValues(e,p).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,b){b&&this.getChildren(b.item,l.hitch(this,function(e){this.onChildrenChange(b.item,
e)}))},onDeleteItem:function(f){this.onDelete(f)},onSetItem:function(f,b){if(-1!=g.indexOf(this.childrenAttrs,b))this.getChildren(f,l.hitch(this,function(b){this.onChildrenChange(f,b)}));else this.onChange(f)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(g,k,m,l,f){return k("dijit.tree.ForestStoreModel",f,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(b){this.root=
{store:this,root:!0,id:b.rootId,label:b.rootLabel,children:b.rootChildren}},mayHaveChildren:function(b){return b===this.root||this.inherited(arguments)},getChildren:function(b,e,a){b===this.root?this.root.children?e(this.root.children):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(a){this.root.children=a;e(a)}),onError:a}):this.inherited(arguments)},isItem:function(b){return b===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(b){if(b.identity==this.root.id){var e=
b.scope||m.global;b.onItem&&b.onItem.call(e,this.root)}else this.inherited(arguments)},getIdentity:function(b){return b===this.root?this.root.id:this.inherited(arguments)},getLabel:function(b){return b===this.root?this.root.label:this.inherited(arguments)},newItem:function(b,e,a){return e===this.root?(this.onNewRootItem(b),this.store.newItem(b)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(b,e,a,d,f){if(e===this.root&&!d)this.onLeaveRoot(b);this.inherited(arguments,[b,
e===this.root?null:e,a===this.root?null:a,d,f]);if(a===this.root)this.onAddToRoot(b)},onAddToRoot:function(b){console.log(this,": item ",b," added to root")},onLeaveRoot:function(b){console.log(this,": item ",b," removed from root")},_requeryTop:function(){var b=this.root.children||[];this.store.fetch({query:this.query,onComplete:l.hitch(this,function(e){this.root.children=e;if(b.length!=e.length||g.some(b,function(a,b){return e[b]!=a}))this.onChildrenChange(this.root,e)})})},onNewItem:function(b,
e){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(b){-1!=g.indexOf(this.root.children,b)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(b,e,a,d){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(g,k,m,l,f,b,e,a,d,n,p){return k("dijit.tree._dndSelector",
p,{constructor:function(){this.selection={};this.anchor=null;this.events.push(a(this.tree.domNode,d.press,l.hitch(this,"onMouseDown")),a(this.tree.domNode,d.release,l.hitch(this,"onMouseUp")),a(this.tree.domNode,d.move,l.hitch(this,"onMouseMove")),a(this.tree.domNode,n.press,l.hitch(this,"onClickPress")),a(this.tree.domNode,n.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,d;for(d in b)a.push(b[d]);return a},selectNone:function(){this.setSelection([]);
return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var d=g.filter(this.getSelectedTreeNodes(),function(d){return!b.isDescendant(d.domNode,a.domNode)});this.setSelection(d);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();g.forEach(this._setDifference(b,
a),l.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));g.forEach(this._setDifference(a,b),l.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){g.forEach(b,function(a){a.__exclude__=!0});a=g.filter(a,function(a){return!a.__exclude__});g.forEach(b,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=
[],d=[];g.forEach(a,function(a){var e=a.getTreePath();d.push(a);b.push(e)},this);a=g.map(d,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",d);this.tree._set("selectedNode",d[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&e.isLeft(a)&&a.preventDefault();
var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var d=f.getCopyKeyState(a),h=b.id;this.singular||a.shiftKey||!this.selection[h]?(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,f.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,
b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(a);a=doc.createRange();a.setStartBefore(b);return d.compareBoundaryPoints(d.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,d){if(this.singular)this.anchor==
a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(d&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);d=this.anchor;0>b?b=d:(b=a,a=d);for(d=[];b!=a;)d.push(b),b=this.tree._getNext(b);d.push(a);this.setSelection(d)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||m.global;for(var d in this.selection)a.call(b,
this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(g,k,m,l,f,b){return k("dijit.tree._dndContainer",null,{constructor:function(e,a){this.tree=e;this.node=e.domNode;l.mixin(this,a);this.containerState="";m.add(this.node,"dojoDndContainer");this.events=[f(this.node,b.enter,l.hitch(this,"onOverEvent")),f(this.node,b.leave,l.hitch(this,"onOutEvent")),g.after(this.tree,"_onNodeMouseEnter",
l.hitch(this,"onMouseOver"),!0),g.after(this.tree,"_onNodeMouseLeave",l.hitch(this,"onMouseOut"),!0),f(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=null},_changeState:function(b,a){var d="dojoDnd"+b;b=b.toLowerCase()+"State";m.replace(this.node,d+a,d+this[b]);this[b]=a},_addItemClass:function(b,a){m.add(b,"dojoDndItem"+
a)},_removeItemClass:function(b,a){m.remove(b,"dojoDndItem"+a)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(g,k,m,l,f){var b={combineRules:function(b){var a=new f;k.forEach(b,function(b){k.forEach(b.leafTypes,function(b){0>a.leafTypes.indexOf(b)&&a.leafTypes.push(b)});
k.forEach(b.serviceTypes,function(b){0>a.serviceTypes.indexOf(b)&&a.serviceTypes.push(b)})});a.getMatchedRule=function(a){var d=null;k.some(b,function(b){return b.isUrlContainsServiceType(a)?(d=b,!0):!1});return d};a.getItem=function(b){var d=null;return d=(d=a.getMatchedRule(b))?d.getItem(b):a.defaultGetItem(b)};a.getSubItemUrls=function(b){var d=null;return d=(d=a.getMatchedRule(b))?d.getSubItemUrls(b):a.defaultGetSubItemUrls(b)};a.getIconImageName=function(b,e){var d="";if(b.url){var f=a.getMatchedRule(b.url);
f&&"function"===typeof f.getIconImageName&&(d=f.getIconImageName(b,e))}return d};return a},getFeaturelayerServiceBrowserRule:function(e,a,d){e=g.clone(e);var f=["point","polyline","polygon"];g.isArrayLike(e)&&0<e.length?(e=k.filter(e,function(a){return 0<=f.indexOf(a)}),0===e.length&&(e=f)):e=f;return b._getFeaturelayerServiceBrowserRule(e,a,d)},_getFeaturelayerServiceBrowserRule:function(b,a,d){return new f({types:b,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",
_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(a){var b=new m;this.isUrlEndWithServiceType(a,this.serviceTypes)?b=this.defaultGetItem(a):this.getRestInfo(a).then(g.hitch(this,function(d){d=this._getItemByLayerDefinition(a,d);b.resolve(d)}),g.hitch(this,function(a){b.reject(a)}));return b},getSubItemUrls:function(a){var b=new m;return b=this.isUrlEndWithServiceType(a)?this._getSubUrlsByServiceUrl(a):this._getSubUrlsByGroupUrl(a)},getIconImageName:function(a,b){var d="";"MapServer"===
a.type||"FeatureServer"===a.type?d=b?"mapserver_open.png":"mapserver_close.png":a.type===this._groupLayerType?d=b?"group_layer2.png":"group_layer1.png":a.type===this._featureLayerType?(a=l.getTypeByGeometryType(a.definition&&a.definition.geometryType),"point"===a?d="point_layer1.png":"polyline"===a?d="line_layer1.png":"polygon"===a&&(d="polygon_layer1.png")):a.type===this._tableType?d="table.png":"root"===a.type&&this._currentUrl&&k.some(this.serviceTypes,g.hitch(this,function(a){return l.isStringEndWith(this._currentUrl,
"/"+a)}))&&(d=b?"mapserver_open.png":"mapserver_close.png");return d},_getSubUrlsByServiceUrl:function(a){var b=new m;this.getRestInfo(a).then(g.hitch(this,function(e){var f=[];k.forEach(e.layers,g.hitch(this,function(b){0<=b.parentLayerId||f.push(a+"/"+b.id)}));d&&k.forEach(e.tables,g.hitch(this,function(b){0<=b.parentLayerId||f.push(a+"/"+b.id)}));b.resolve(f)}),g.hitch(this,function(a){b.reject(a)}));return b},_getSubUrlsByGroupUrl:function(a){var b=new m;this.getRestInfo(a).then(g.hitch(this,
function(d){var e=[];if(d.type===this._groupLayerType)var f=this._getServiceUrlByLayerUrl(a),e=k.map(d.subLayers||[],g.hitch(this,function(a){return f+"/"+a.id}));b.resolve(e)}),g.hitch(this,function(a){b.reject(a)}));return b},_getItemByLayerDefinition:function(b,d){var e=null,f=d.type;if(f===this._groupLayerType)e={name:d.name,type:f,url:b,definition:d};else if(f===this._featureLayerType||f===this._tableType){var n=!1;f===this._featureLayerType?n=this._validateEsriGeometryType(d.geometryType):f===
this._tableType&&(n=!0);n&&(n=!1,(n=a?l.isFeaturelayerUrlSupportQuery(b,d.capabilities):!0)&&(e={name:d.name,type:f,url:b,definition:d}))}return e},_validateEsriGeometryType:function(a){a=l.getTypeByGeometryType(a);return 0<=this.types.indexOf(a)},_getServiceUrlByLayerUrl:function(a){for(var b="",d=0;d<this.serviceTypes.length;d++){var e=this.serviceTypes[d].toLowerCase(),f=a.toLowerCase().lastIndexOf("/"+e+"/");if(0<=f){b=a.slice(0,f+e.length+1);break}}return b}})},getGeocodeServiceBrowserRule:function(){return new f({leafTypes:["GeocodeServer"],
serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new f({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(b){var a=new m;this.isUrlEndWithServiceType(b)?a=this.defaultGetItem(b):this.getRestInfo(b).then(g.hitch(this,function(d){a.resolve({name:d.displayName||d.name,type:"GPTask",url:b,definition:d})}),g.hitch(this,function(b){a.reject(b)}));return a},getSubItemUrls:function(b){var a=new m;this.isUrlEndWithServiceType(b)?this.getRestInfo(b).then(g.hitch(this,
function(d){d=k.map(d.tasks||[],g.hitch(this,function(a){return b+"/"+a}));a.resolve(d)}),g.hitch(this,function(b){a.reject(b)})):a.resolve([]);return a},getIconImageName:function(b,a){a="";"GPServer"===b.type?a="toolbox.png":"GPTask"===b.type&&(a="tool.png");return a}})},getImageServiceBrowserRule:function(b){return new f({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(a){var d=new m;this.isUrlEndWithServiceType(a)?this.defaultGetItem(a).then(g.hitch(this,function(a){b?l.isImageServiceSupportQuery(a.definition.capabilities)?
d.resolve(a):d.resolve(null):d.resolve(a)}),g.hitch(this,function(a){d.reject(a)})):d.resolve(null);return d},getIconImageName:function(a,b){b="";"ImageServer"===a.type&&(b="image_layer.png");return b}})},getQueryableServiceBrowserRule:function(){var e=b.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),a=b.getImageServiceBrowserRule(!0);return b.combineRules([e,a])}};return b})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),
function(g,k,m,l,f,b,e){return g([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(a){k.mixin(this,a);k.isArrayLike(this.leafTypes)||(this.leafTypes=[]);k.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(a){return this.defaultGetItem(a)},getSubItemUrls:function(a){return this.defaultGetSubItemUrls(a)},getIconImageName:function(a,b){return""},defaultGetItem:function(a){var b=new l;a=a.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(a)){var e=a.split("/"),
f=e[e.length-1],h=e[e.length-2];this.getRestInfo(a).then(k.hitch(this,function(d){b.resolve({name:h,type:f,url:a,definition:d})}),k.hitch(this,function(a){console.error(a);b.reject({errorCode:"NETWORK_ERROR",error:a})}))}else b.resolve(null);return b},defaultGetSubItemUrls:function(a){a=new l;a.resolve([]);return a},getRestInfo:function(a){var d=new l;a=a.replace(/\/*$/g,"");var f=this._restInfoCache[a];if(f)d.resolve(f);else{var f={url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",
timeout:2E4},p=e.findCredential(a);p&&p.token&&(f.content.token=p.token);b(f).then(k.hitch(this,function(b){this._restInfoCache[a]=b;d.resolve(b)}),function(a){d.reject(a)})}return d},isServiceTypeSupported:function(a){a=a.toLowerCase();return m.some(this.serviceTypes,k.hitch(this,function(b){return b.toLowerCase()===a}))},isUrlEndWithServiceType:function(a){return m.some(this.serviceTypes,k.hitch(this,function(b){return f.isStringEndWith(a,"/"+b)}))},isUrlContainsServiceType:function(a){a=a.toLowerCase();
return m.some(this.serviceTypes,k.hitch(this,function(b){b=b.toLowerCase();return 0<=a.indexOf("/"+b)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GpServiceBrowser"],function(g,k,m){return g([k],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer","http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],
_createServiceBrowser:function(g){return new m(g)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t){return g([k,m,l,b],{templateString:f,
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=n.mixin({},window.jimuNls.common);this.nls=n.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=
!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(a){var b=new e;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),b=this._onBtnValidateClick()):b.reject();return b},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?d.forEach(this._examples,n.hitch(this,function(b){a.create("div",{innerHTML:b,"class":"example-url"},this.exampleTd)})):a.setStyle(this.exampleTr,"display",
"none");var b={multiple:this.multiple,_onTreeClick:n.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(h.after(this.urlInput,"validator",n.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(p(this.serviceBrowser,"error",n.hitch(this,this._onServiceBrowserError)))},_createServiceBrowser:function(a){},_validateUrl:function(a){a=
a.replace(/\/*$/g,"");if((a=a.match(/\/rest\/services\/*(.*)/gi))&&0<a.length)if(a=a[0].replace(/\/rest\/services\/*/,"")){var b=a.split("/");if(1===b.length)return!0;if(2===b.length)return this.serviceBrowser.isServiceTypeSupported(b[1]);if(3<=b.length)return a=this.serviceBrowser.isServiceTypeSupported(b[1]),b=this.serviceBrowser.isServiceTypeSupported(b[2]),a||b}else return!0;else return!1},_afterUrlValidate:function(b){b&&(b=this.urlInput.get("value"),b=this._validateUrl(b));b?a.removeClass(this.btnValidate,
"jimu-state-disabled"):a.addClass(this.btnValidate,"jimu-state-disabled");return b},_onServiceBrowserError:function(a){this._showErrorMessage(a)},_showErrorMessage:function(b){b&&"string"===typeof b?(this.errorNode.innerHTML=b,a.addClass(this.errorSection,"visible")):a.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";a.removeClass(this.errorSection,"visible")},_onBtnValidateClick:function(){this._clearErrorMessage();var a=new e;if(this.urlInput.validate()){var b=
this.urlInput.get("value");this.serviceBrowser.setUrl(b).then(n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}));this.emit("validate-click")}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?a.removeClass(this.btnOk,"jimu-state-disabled"):a.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},
_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/PageUtils":function(){define([],function(){var g={};g.Orientation={Landscape:{Type:"Landscape",Text:window.jimuNls.report.landscape},Portrait:{Type:"Portrait",Text:window.jimuNls.report.portrait}};g.PageSizes={A0:{Height:46.8,Width:33.1,SizeName:window.jimuNls.report.a0,MapLayout:"MAP_ONLY"},A1:{Height:33.1,Width:23.4,SizeName:window.jimuNls.report.a1,
MapLayout:"MAP_ONLY"},A2:{Height:23.4,Width:16.5,SizeName:window.jimuNls.report.a2,MapLayout:"MAP_ONLY"},A3:{Height:16.5,Width:11.7,SizeName:window.jimuNls.report.a3,MapLayout:"A3"},A4:{Height:11.7,Width:8.3,SizeName:window.jimuNls.report.a4,MapLayout:"A4"},A5:{Height:8.3,Width:5.8,SizeName:window.jimuNls.report.a5,MapLayout:"MAP_ONLY"},Letter_ANSI_A:{Height:11,Width:8.5,SizeName:window.jimuNls.report.letter+" "+window.jimuNls.report.ansi_a,MapLayout:"Letter ANSI A"},Tabloid_ANSI_B:{Height:17,Width:11,
SizeName:window.jimuNls.report.tabloid+" "+window.jimuNls.report.ansi_b,MapLayout:"Tabloid ANSI B"},ANSI_C:{Height:22,Width:17,SizeName:window.jimuNls.report.ansi_c,MapLayout:"MAP_ONLY"},ANSI_D:{Height:34,Width:22,SizeName:window.jimuNls.report.ansi_d,MapLayout:"MAP_ONLY"},ANSI_E:{Height:44,Width:34,SizeName:window.jimuNls.report.ansi_e,MapLayout:"MAP_ONLY"},Legal:{Height:14,Width:8.5,SizeName:window.jimuNls.report.legal,MapLayout:"MAP_ONLY"},Custom:window.jimuNls.common.custom};g.getPageSizeInPixels=
function(g,m){return{Height:g.Height*m,Width:g.Width*m}};return g})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(g,k,m,l,f,b,e,a,d,
n,p,h,u,v,t,r,q,w){var x=m([l,f,b,k],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,
onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new w({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=h.hitch(this,this.basicFilter);this.filter=x.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(b){var c=new a;this.onlyShowVisible?c.resolve(b.isShowInMap()):c.resolve(!0);return c},filter:function(b){b=new a;b.resolve(!0);return b},getSelectedItems:function(){var a=this.tree.getSelectedItems();return v.map(a,h.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),c=[];v.forEach(a,h.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),c.push(a))}));return c},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;q.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(h.hitch(this,function(a){this.layerInfosObj=a;this.own(g(this.layerInfosObj,"layerInfosChanged",h.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(g(this.layerInfosObj,"layerInfosIsShowInMapChanged",h.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,c){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();u.setStyle(this.errorTipSection,"display","block");var c=[];this.onlyShowWebMapLayers?(c=a.getLayerInfoArrayOfWebmap(),c=c.concat(a.getTableInfoArrayOfWebmap())):(c=a.getLayerInfoArray(),c=c.concat(a.getTableInfoArray()));
0!==c.length&&(u.setStyle(this.errorTipSection,"display","none"),v.forEach(c,h.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(h.hitch(this,function(){this._addItem("root",a)}),h.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});v.forEach(a,h.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,c){var b=null,d=c.getLayerType(),e=this.filter(c);
p({layerType:d,valid:e}).then(h.hitch(this,function(d){if(d.valid){var e=h.hitch(this,function(e,f){this._id++;b={name:c.title||"",parent:a,layerInfo:c,type:d.layerType,layerClass:c.layerObject.declaredClass,id:this._id.toString(),isLeaf:e,hasChildren:f};this._store.add(b)}),f=c.getSubLayers(),g=0===f.length;g?e(g,!1):(f=v.map(f,h.hitch(this,function(a){return this.filter(a)})),p(f).then(h.hitch(this,function(a){(a=v.some(a,function(a){return a}))&&e(g,a)})))}}))},_getRootItem:function(){return{id:"root",
name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),a=new e({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new d(a);a=new n({store:this._store,query:{id:"root"},mayHaveChildren:h.hitch(this,this._mayHaveChildren)});this.tree=new r({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:h.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:h.hitch(this,function(a,b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:h.hitch(this,
function(a,b,d){this._onTreeClick(a,b,d);this.emit("tree-click",a,b,d)}),getIconStyle:h.hitch(this,function(a,b){var c=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconImageName(a,b))d.backgroundImage="url("+e+"/css/images/"+a+")",c=d;return c}),getTooltip:h.hitch(this,function(a){return this.displayTooltipForTreeNode?
a.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,c){var b="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?b=c?"mapserver_open.png":"mapserver_close.png":"GroupLayer"===a.type?b=c?"group_layer2.png":"group_layer1.png":"FeatureLayer"===a.type?(a=t.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),"point"===
a?b="point_layer1.png":"polyline"===a?b="line_layer1.png":"polygon"===a&&(b="polygon_layer1.png")):b="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===a.type?"image_layer.png":c?"mapserver_open.png":"mapserver_close.png";return b},_onTreeOpen:function(a,c){if("root"!==a.id){var b=[];c=[];b=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),c=v.map(b,h.hitch(this,function(a){return a.getLayerObject()})),p(c).then(h.hitch(this,function(){this.domNode&&
(v.forEach(b,h.hitch(this,function(c){this._addItem(a.id,c)})),a.checked=!0,this.shelter.hide())}),h.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,c,b){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});x.createFilterByLayerType=function(b){h.isArrayLike(b)||(b=[]);return function(c){var d=new a;if(0===b.length)d.resolve(!0);else{var e=[];c.traversal(function(a){e.push(a.getLayerType())});
p(e).then(function(a){for(var c=0;c<a.length;c++)for(var e=0;e<b.length;e++)if(a[c]===b[e]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);d.reject(a)})}return d}};x.createFeaturelayerFilter=function(a,c,b,d){var e=["point","polyline","polygon"];a&&0<a.length?(a=v.filter(a,function(a){return 0<=e.indexOf(a)}),0===a.length&&(a=e)):a=e;return function(e){var f=e.getLayerType();e=e.getLayerObject();return p({layerType:f,layerObject:e}).then(function(e){var f=e.layerType;e=e.layerObject;
if("ArcGISDynamicMapServiceLayer"===f||"ArcGISTiledMapServiceLayer"===f||"GroupLayer"===f||"FeatureCollection"===f)return!0;if("FeatureLayer"===f){var f=t.getTypeByGeometryType(e.geometryType),f=0<=v.indexOf(a,f),h=x._shouldPassStatisticsCheck(d,e);return e.url?(e=t.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),f&&e&&h):c&&f}return"Table"===f?(f=t.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),e=x._shouldPassStatisticsCheck(d,e),b&&f&&e):!1})}};x.createImageServiceLayerFilter=function(a,
c){return function(b){var d=b.getLayerType();b=b.getLayerObject();return p({layerType:d,layerObject:b}).then(function(b){var d=b.layerType,e=b.layerObject;return"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?t.isImageServiceSupportQuery(b.layerObject.capabilities)?c?x._shouldPassStatisticsCheck(c,e):!0:!1:!0:!1})}};x._shouldPassStatisticsCheck=function(a,c){return a?(a=!1,a=c.advancedQueryCapabilities?!!c.advancedQueryCapabilities.supportsStatistics:!!c.supportsStatistics):!0};
x.createQueryableLayerFilter=function(a){var c=x.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=x.createImageServiceLayerFilter(!0,a);return x.orCombineFilters([c,a])};x.andCombineFilters=function(a){return x._combineFilters(a,!0)};x.orCombineFilters=function(a){return x._combineFilters(a,!1)};x._combineFilters=function(b,c){return function(d){var e=new a,f=v.map(b,function(a){return a(d)});p(f).then(function(a){var b=!1,b=c?v.every(a,function(a){return a}):v.some(a,function(a){return a});
e.resolve(b)},function(a){console.error(a);e.reject(a)});return e}};return x})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(g,k,m,l,f,b,e,a,d,n,p){return g([a,d,f],{templateString:n,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",
_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,postCreate:function(){this.inherited(arguments);this.layerInfosObj=p.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(l(this.layerChooser,"tree-click",k.hitch(this,this._onTreeClick)));this.own(l(this.layerChooser,"update",k.hitch(this,this._onLayerChooserUpdate)));this.own(l(document.body,"click",
k.hitch(this,this._onBodyClicked)))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(a){var d=new b;if(a){var e=this.layerInfosObj.getLayerInfoById(a.id);e?this.layerChooser.filter(e).then(k.hitch(this,function(b){b?(this._onSelectNewItem({layerInfo:e,name:e.title,url:a.url}),d.resolve(!0)):d.resolve(!1)}),k.hitch(this,function(){d.resolve(!1)})):
d.resolve(!1)}else this._onSelectNewItem(null),d.resolve(!0);return d},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(a){a=a.target||a.srcElement;a===this.domNode||m.isDescendant(a,this.domNode)||a===this.layerChooser.domNode||m.isDescendant(a,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(a){a.stopPropagation();a.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():
this.showLayerChooser()},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";e.open({parent:this,popup:this.layerChooser,around:this.domNode});var a=this.layerChooser.domNode.parentNode;a&&m.addClass(a,"jimu-layer-chooser-from-map-withdropbox-popup");this._isLayerChooserShow=!0},hideLayerChooser:function(){e.close(this.layerChooser);this._isLayerChooserShow=!1},_onLayerChooserUpdate:function(){this._selectedItem&&
this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(a){var b=k.getObject("layerInfo.id",!1,this._selectedItem)||-1,d=k.getObject("layerInfo.id",!1,a)||-1,b=b!==d;this._selectedItem=a;this.hideLayerChooser();a=k.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=a;m.setAttr(this.layerNameNode,"title",a);a=k.getObject("layerInfo.layerObject",!1,this._selectedItem);
b&&this.emit("selection-change",[a])},_onTreeClick:function(){var a=this._getSelectedItems();this._onSelectNewItem(0<a.length?a[0]:null)}})})},"widgets/Screening/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on jimu/BaseWidget dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable dojo/query dojo/dom-class jimu/utils".split(" "),function(g,k,m,l,
f,b,e,a,d,n,p,h,u,v,t){return g([d,k,p],{templateString:n,baseClass:"jimu-widget-screening-setting",_fieldsTable:null,_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:{},_configuredField:null,_configuredLabel:null,constructor:function(a){this._fieldsTable=null;this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj={};this._configuredLabel=this._configuredField=null;b.mixin(this,a)},postMixInProperties:function(){this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common)},
postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._clearData();this._addValidFields();this._createFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[]},_displayPreviousConfiguredFields:function(){var a;if(this.selectedFields)for(a in this.selectedFields)this._configuredField=a,this._configuredLabel=this.selectedFields[a].label,this.btnAddField.click()},_addValidFields:function(){var a;
a="esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate".split(" ");f.forEach(this.featureLayer.fields,b.hitch(this,function(d){this._entireFieldObj[d.name]=d;-1<a.indexOf(d.type)&&(this._entireFieldsArr.push(d.name),this._entireFieldObj[d.name]=b.clone(d),this.selectedFields&&this.selectedFields[d.name]&&(this._entireFieldObj[d.name].label=this.selectedFields[d.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},
_createFieldsTable:function(){this._fieldsTable=new h({fields:[{name:"layer",title:this.nls.analysisTab.addFieldsNameTitle,"class":"label",type:"empty",width:"40%"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"40%"},{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"20%"}]});this._fieldsTable.placeAt(this.fieldTable);e.setStyle(this._fieldsTable.domNode,{height:"100%"});this._fieldsTable.startup()},
_attachEventsToElement:function(){this.own(a(this.btnAddField,"click",b.hitch(this,function(){var a;v.contains(this.btnAddField,"esriCTDisabled")||(a=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr),this._addFieldsRow(a))})));this.own(a(this._fieldsTable,"row-delete",b.hitch(this,function(a){this._deleteFieldRow(a)})))},_addFieldsRow:function(a){var b,d,e;b=this._fieldsTable.addRow({});b.success&&b.tr&&(b=b.tr,e=u(".simple-table-cell",b),d=e[0],e=e[1],this._addFieldDropdown(a,
d,b),this._addLabelTextbox(e,b))},_deleteFieldRow:function(a){var b;v.remove(this.btnAddField,"esriCTDisabled");b=this._selectedFieldsArr.indexOf(a.fieldDropdownInstance.value);-1<b&&this._selectedFieldsArr.splice(b,1);this._addSelectedFieldInOtherDropdown(a.fieldDropdownInstance.value,null)},_addFieldDropdown:function(d,e,f){d=this._getDistinctFieldsOptionsObj(d);d=new m({"class":"esriCTFieldChooserDropdown",options:d});d.placeAt(e);d.startup();this._configuredField&&(d.set("value",this._configuredField),
this._configuredField=null);f.fieldDropdownInstance=d;this.own(a(d,"change",b.hitch(this,function(a){var b;b=this._selectedFieldsArr[f.rowIndex];this._selectedFieldsArr[f.rowIndex]=a;this._addSelectedFieldInOtherDropdown(b,a);this._removeSelectedFieldFromOtherDropdown(a)})));this._selectedFieldsArr.push(d.value);this._removeSelectedFieldFromOtherDropdown(d.value);this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&v.add(this.btnAddField,
"esriCTDisabled")},_addLabelTextbox:function(a,b){var d;d=new l({"class":"esriCTFieldValidationTextBox"});d.placeAt(a);d.startup();this._configuredLabel&&(d.set("value",this._configuredLabel),this._configuredLabel=null);b.fieldLabelInstance=d},_getDistinctFieldsOptionsObj:function(a){var d=[];f.forEach(a,b.hitch(this,function(a){d.push({label:this._entireFieldObj[a].alias||this._entireFieldObj[a].name,value:a})}));return d},_removeSelectedFieldFromOtherDropdown:function(a){var d;d=this._fieldsTable.getRows();
f.forEach(d,b.hitch(this,function(b){a!==b.fieldDropdownInstance.value&&b.fieldDropdownInstance.removeOption(a)}))},_addSelectedFieldInOtherDropdown:function(a,d){var e;e=this._fieldsTable.getRows();f.forEach(e,b.hitch(this,function(b){d!==b.fieldDropdownInstance.value&&b.fieldDropdownInstance.addOption({label:this._entireFieldObj[a].alias,value:a})}))},okButtonClicked:function(){var a,d;d={};a=this._fieldsTable.getRows();0===a.length?this.selectedFields=null:(f.forEach(a,b.hitch(this,function(a){this._entireFieldObj[a.fieldDropdownInstance.value].label=
t.stripHTML(b.trim(a.fieldLabelInstance.value));d[a.fieldDropdownInstance.value]=this._entireFieldObj[a.fieldDropdownInstance.value]})),this.selectedFields=d);return this.selectedFields},_getDistinctFields:function(a,b){return a.filter(function(a){return 0>b.indexOf(a)})}})})},"widgets/Screening/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C){return g([k,m,l],{baseClass:"jimu-widget-screening-search-source-settings",templateString:f,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(w(this.menuItemClickNode,"click",t.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new C({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);n.getInstance(this.map,this.map.itemInfo).then(t.hitch(this,function(a){this.layerInfosObj=a;p.setMap(this.map);p.setLayerInfosObj(this.layerInfosObj);p.setAppConfig(this.appConfig);u(p.getConfigInfo(this.config)).then(t.hitch(this,this._loadConfig))}))},_loadConfig:function(a){this.domNode&&this.setConfig(a)},setConfig:function(a){this.config=a;a=a.sources;this.allPlaceholder.set("value",h.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(v.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);r.forEach(a,t.hitch(this,function(a,c){var b=this.sourceList.addRow({name:a.name||""});b&&b.success?(this._setRelatedConfig(b.tr,a),0===c&&setTimeout(t.hitch(this,function(){this.sourceList.selectRow(b.tr)}),100)):console.error("add row failed ",b)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var a={allPlaceholder:h.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},b=this.sourceList.getRows(),d=[];r.forEach(b,t.hitch(this,function(a){var c=this._getRelatedConfig(a);delete c._definition;this._removeRelatedConfig(a);d.push(c)}));a.sources=d;return a},destroy:function(){p.setMap(null);p.setLayerInfosObj(null);p.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",h.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new e({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.common.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);b.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(w(this.sourceList,"row-select",t.hitch(this,this._onSourceItemSelected)));this.own(w(this.sourceList,"row-delete",t.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(a){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===a&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(a){var c=this._getRelatedConfig(a),b=this._currentSourceSetting&&this._currentSourceSetting.tr;c&&a!==b&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(b)):(x.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===c.type?this._createNewQuerySourceSettingFromSourceList(c,
c._definition||{},a):"locator"===c.type&&this._createNewLocatorSourceSettingFromSourceList(c,c._definition||{},a)))},_setRelatedConfig:function(a,b){q(a).data("config",t.clone(b))},_getRelatedConfig:function(a){return q(a).data("config")[0]},_removeRelatedConfig:function(a){return q(a).removeData("config")},_onMenuItemClick:function(a){a=a&&a.target&&b.getAttr(a.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(x.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===a?this._addNewLocator():"query"===a&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(a,b){var c=new d({nls:t.mixin(this.nls.searchSourceSetting,window.jimuNls.units),map:this.map});c.setDefinition(b);c.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||
"",placeholder:a.placeholder||"",countryCode:a.countryCode||"",maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,type:"locator"});c._openLocatorChooser();c.own(w(c,"select-locator-url-ok",t.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name||"New Geocoder"},this.sourceList.getRows().length))&&a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),c.setRelatedTr(a.tr),c.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),
this._currentSourceSetting=c)})));c.own(w(c,"reselect-locator-url-ok",t.hitch(this,function(a){var c=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(c,{name:a.name})})));c.own(w(c,"select-locator-url-cancel",t.hitch(this,function(){this._currentSourceSetting!==c&&(c.destroy(),c=null)})))},_createNewLocatorSourceSettingFromSourceList:function(a,b,e){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new d({nls:t.mixin(this.nls.searchSourceSetting,window.jimuNls.units),
map:this.map});this._currentSourceSetting.own(w(this._currentSourceSetting,"enable-local-search",t.hitch(this,function(){x.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(w(this._currentSourceSetting,"disable-local-search",t.hitch(this,function(){x.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(b);this._currentSourceSetting.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||"",
placeholder:a.placeholder||"",countryCode:a.countryCode||"",maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,enableLocalSearch:!!a.enableLocalSearch,localSearchMinScale:a.localSearchMinScale,localSearchDistance:a.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(e);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(w(this._currentSourceSetting,"reselect-locator-url-ok",
t.hitch(this,function(a){var c=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(c,{name:a.name})})))},_closeSourceSetting:function(){var a=this._currentSourceSetting.getRelatedTr(),b=this._currentSourceSetting.getConfig();b._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(a,b);this.sourceList.editRow(a,{name:b.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(c,b){var d=new a({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});d.setDefinition(b);d.setConfig({url:c.url,name:c.name||"",layerId:c.layerId,placeholder:c.placeholder||"",searchFields:c.searchFields||[],displayField:c.displayField||b.displayField||"",exactMatch:!!c.exactMatch,maxSuggestions:c.maxSuggestions||6,maxResults:c.maxResults||6,searchInCurrentMapExtent:!!c.searchInCurrentMapExtent,type:"query"});d._openQuerySourceChooser();d.own(w(d,"select-query-source-ok",t.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name},
0))&&a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),d.setRelatedTr(a.tr),d.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),this._currentSourceSetting=d)})));d.own(w(d,"reselect-query-source-ok",t.hitch(this,function(a){var c=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(c,{name:a.name})})));d.own(w(d,"select-query-source-cancel",t.hitch(this,function(){this._currentSourceSetting!==d&&(d.destroy(),d=null)})))},_createNewQuerySourceSettingFromSourceList:function(c,
b,d){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new a({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(b);this._currentSourceSetting.setConfig({url:c.url,name:c.name||"",layerId:c.layerId,placeholder:c.placeholder||"",searchFields:c.searchFields||[],displayField:c.displayField||b.displayField||"",exactMatch:!!c.exactMatch,maxSuggestions:c.maxSuggestions||
6,maxResults:c.maxResults||6,searchInCurrentMapExtent:!!c.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(d);this._currentSourceSetting.own(w(this._currentSourceSetting,"reselect-query-source",t.hitch(this,function(a){var c=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(c,{name:a.name})})))}})})},"widgets/Screening/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x){return g([m,l,f,h],{baseClass:"jimu-widget-screening-query-source-setting",templateString:b,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,constructor:function(a){this._layerId=this._fieldsCheckBox=this._layerDefinition=null;this._clickSet=this._suggestible=!1;this.fieldsPopup=this.config=this.tr=this.map=this.appConfig=this.nls=null;e.mixin(this,
a)},postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(d(this.setSourceBtnClickNode,"click",e.hitch(this,this._onSetSourceClick)));this.own(d(this.sourceName,"Blur",e.hitch(this,this._onSourceNameBlur)));this.own(d(this.placeholder,"Blur",e.hitch(this,this._onPlaceholderBlur)));this.own(d(this.fieldsSelectorNode,"click",e.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new x({checked:!1,label:this.nls.exactMatch},
this.exactMatch);this.searchInCurrentMapExtent=new x({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(a){this._layerDefinition=a||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var c=a.url;c&&(this.config=
a,this.shelter.show(),this._layerDefinition.url!==c?this._getDefinitionFromRemote(c).then(e.hitch(this,function(a){c&&a&&"error"!==a.type?(this._layerDefinition=a,this._layerDefinition.url=c,this._setSourceItems(),this._setMessageNodeContent("")):c&&a&&"error"===a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(r.substitute({URL:a.url},e.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},
isValidConfig:function(){var a=this.getConfig();return a.url&&a.name&&a.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:q.stripHTML(this.sourceName.get("value")),placeholder:q.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),
searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",q.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",
q.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);k.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);k.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",q.stripHTML(this.config.name||""));this.placeholder.set("value",q.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||
"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._enableSourceItems()},_getDefinitionFromRemote:function(a){var c=new p,b=t({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(b);b.then(e.hitch(this,function(a){c.resolve(a)}),e.hitch(this,function(b){console.error(b);c.resolve({type:"error",url:this._getRequestUrl(a)})}));return c.promise},_setMessageNodeContent:function(a,c){k.empty(this.messageNode);a.nodeType||(a=k.toDom(a));k.place(a,this.messageNode);c?k.setStyle(this.messageTr,"display",""):k.setStyle(this.messageTr,
"display","none")},_getRequestUrl:function(a){var c=window.location.protocol;return"http:"===c?v.setHttpProtocol(a):"https:"===c?v.setHttpsProtocol(a):a},_setSearchFields2Node:function(){var b=null,c=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(b=[]);if(c)var d=this._layerDefinition.fields,b=a.filter(this.config.searchFields,function(c){return a.some(d,function(a){return a.name===
c})});else b=this.config.searchFields;this.searchFields.set("_fields",b)},_setDisplayFieldOptions:function(){var b=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?b=a.map(this._layerDefinition.fields,function(a){return{label:a.alias||a.name||"",value:a.name||""}}):this.config&&this.config.displayField&&(b=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",b)},_getSearchFieldsAlias:function(){var b=this._getSearchFields();
if(!(b&&0<b.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var c=this._layerDefinition.fields,d=a.map(c,function(a){return a&&a.name}),e=[],f=0,h=b.length;f<h;f++){var g=d.indexOf(b[f]);-1<g&&(c[g].alias?e.push(c[g].alias):e.push(c[g].name))}return e.join(",")}return b.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(a){this.searchFields.set("_fields",a)},_onSetSourceClick:function(){this._clickSet=
!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var a=new u({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});d.once(a,"ok",e.hitch(this,function(c){a.close();this.setDefinition(c.definition||{});this.setConfig({layerId:c.layerInfo&&c.layerInfo.id||null,url:c.url,name:c.name||"",placeholder:"",
searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,maxSuggestions:6,maxResults:6,type:"query"});a=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",c):this.emit("select-query-source-ok",c)}));d.once(a,"cancel",e.hitch(this,function(){a.close();a=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var b=k.create("div",{style:{maxHeight:"480px"}}),c=this._layerDefinition.fields;this._fieldsCheckBox=
[];a.forEach(c,e.hitch(this,function(a,c){var d=new x({checked:this._isSearchable(a),label:a.alias||a.name});k.addClass(d.domNode,"esriCTSearchSourceFieldCheckbox");k.addClass(d.labelNode,"jimu-ellipsis");k.setAttr(d.domNode,{title:a.alias||a.name});0===c%3&&(window.isRTL?k.setStyle(d.domNode,"marginRight",0):k.setStyle(d.domNode,"marginLeft",0));d.placeAt(b);n(d.domNode).data("fieldName",a.name);this._fieldsCheckBox.push(d)}));this.fieldsPopup=new w({titleLabel:this.nls.setSearchFields,autoHeight:!0,
content:b,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:e.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel}],onClose:e.hitch(this,function(){this.fieldsPopup=null})});k.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var b=[];a.forEach(this._fieldsCheckBox,function(a){if(a.getValue()){var c=n(a.domNode).data("fieldName");b.push(c[0]);n(a.domNode).removeData()}});this._setSearchFields(b);this.searchFields.set("value",
this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(b){var c=this._getSearchFields();return a.some(c,e.hitch(this,function(a){return b.name===a}))},_showSuggestibleTips:function(){k.removeClass(this.tipsNode,"esriCTHidden");k.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){k.addClass(this.tipsNode,"esriCTHidden");k.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&
a.focusNode){var c=a.get("disabled");c&&a.set("disabled",!1);a.focusNode.focus();setTimeout(e.hitch(this,function(){a.focusNode.blur();c&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(g,k,m,l,f,b,e,a,d){return g([b,k],{width:830,height:560,titleLabel:"",dijitArgs:null,
postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new e(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(m(this.fls,"ok",l.hitch(this,function(a){if(0!==a.length){var b=a[0];if(b.definition)try{b.definition.name=b.name,b.definition.url=b.url,this.emit("ok",b)}catch(h){console.error(h)}else this.loading.show(),
d({url:b.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(l.hitch(this,function(a){if(this.domNode){this.loading.hide();b.definition=a;try{b.definition.name=b.name,b.definition.url=b.url,this.emit("ok",b)}catch(u){console.error(u)}}}),l.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(m(this.fls,"cancel",l.hitch(this,function(){try{this.emit("cancel")}catch(n){console.error(n)}})))},_initLoading:function(){this.loading=new a({hidden:!0});
this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),function(g,k,m,l,
f,b,e,a,d,n,p,h,u,v){return g([k,m,l,d],{templateString:f,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=v.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";if(this.portalRadio.checked)return"portal";
if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var a=[];this.mapRadio.checked?a=this.flcMap.getSelectedItems():this.portalRadio.checked?a=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.flcUrl.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();this._createFeaturelayerChooserFromPortal();
this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new p({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(a(this.flcMap,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.flcMap,"cancel",b.hitch(this,function(){this.emit("cancel")})))},
_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new h({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(a(this.flcPortal,"next",b.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(a(this.flcPortal,"back",b.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;
this._updateOperationTip()})));this.own(a(this.flcPortal,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.flcPortal,"cancel",b.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=new u({multiple:this.multiple,style:{width:"100%",height:"100%"}});
this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(a(this.flcUrl,"ok",b.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.flcUrl,"cancel",b.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var d="featureLayerSourceRadios_"+this._getRandomString(),e=b.hitch(this,this._onRadioClicked);this.mapRadio=new n({group:d,onStateChange:e,checked:!0});this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new n({group:d,
onStateChange:e,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new n({group:d,onStateChange:e,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(a(this.mapLabel,"click",b.hitch(this,function(){this.mapRadio.check()})));this.own(a(this.portalLabel,"click",b.hitch(this,function(){this.portalRadio.check()})));this.own(a(this.urlLabel,"click",b.hitch(this,function(){this.urlRadio.check()})))},_getRandomString:function(){var a=Math.random().toString();return a=
a.slice(2,a.length)},_onRadioClicked:function(){e.setStyle(this.flcContainer,"display","none");e.setStyle(this.hflcContainer,"display","none");e.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(e.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(e.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(e.setStyle(this.flscContainer,"display","block"),
this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(g,k,m,l,f,b,e,a,d){return f([b,e,a,k],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(a){this.options=a},postMixInProperties:function(){this.nls=m.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=new d(this.options);this.layerChooser.placeAt(this.chooserContainer);l.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(g(this.layerChooser,"tree-click",m.hitch(this,function(){0<this.getSelectedItems().length?l.removeClass(this.btnOk,"jimu-state-disabled"):l.addClass(this.btnOk,"jimu-state-disabled")})));
this.own(g(this.btnOk,"click",m.hitch(this,function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(g(this.btnCancel,"click",m.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],
function(g,k,m,l,f){return g([f],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=l.hitch(this,this.basicFilter);this.filter=f.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,
this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=f.andCombineFilters([this.filter,l.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(b){return b.getLayerType().then(function(b){return!("ArcGISDynamicMapServiceLayer"===b||"ArcGISTiledMapServiceLayer"===b||"GroupLayer"===b)})},basicFilter:function(b){var e=new k;0<=this.ignoredFeaturelayerIds.indexOf(b.id)?
e.resolve(!1):this.onlyShowVisible&&"Table"!==b.getLayerType()?e.resolve(b.isShowInMap()):e.resolve(!0);return e},getHandledItem:function(b){var e=this.inherited(arguments),a=b&&b.layerInfo,a=a&&a.layerObject;e.url=a&&a.url||"";return e}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q){return g([k,m,l,h],{templateString:f,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=b.mixin({},window.jimuNls.common);this.nls=b.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=r.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new v({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(d(this.selector,"item-selected",b.hitch(this,this._onItemSelected)));this.own(d(this.selector,"none-item-selected",b.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new t({multiple:this.multiple});this.own(d(this.serviceBrowser,"tree-click",b.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){e.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){e.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();e.setStyle(this.btnOk,"display","none");e.setStyle(this.btnNext,"display","block");e.setStyle(this.btnBack,"display","none");e.addClass(this.btnOk,"jimu-state-disabled");e.setStyle(this.selectorContainer,"display","block");e.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();
a&&(e.setStyle(this.btnNext,"display","none"),e.setStyle(this.btnBack,"display","block"),e.setStyle(this.btnOk,"display","block"),e.addClass(this.btnOk,"jimu-state-disabled"),e.setStyle(this.selectorContainer,"display","none"),e.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(a.url||a.item),this._serviceBrowserDef.then(b.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),b.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?e.removeClass(this.btnOk,"jimu-state-disabled"):e.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(g,k,m,l,f){return g([k],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=f.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var b=this.inherited(arguments);return b=l.map(b,m.hitch(this,function(b){return{name:b.name,url:b.url,definition:b.definition}}))}})})},
"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(g,k,m){return g([k],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(g){return new m(g)}})})},
"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(g,k,m,l,f){var b=k.NodeList,e={},a=0,d=function(b){var d=f.get(b,"data-dojo-dataid");d||(d="pid"+a++,f.set(b,"data-dojo-dataid",d));return d},n=g._nodeData=function(a,b,f){var h=d(a),g;e[h]||(e[h]={});if(1==arguments.length)return e[h];"string"==typeof b?2<arguments.length?e[h][b]=f:g=e[h][b]:g=m.mixin(e[h],b);return g},p=g._removeNodeData=function(a,b){a=d(a);e[a]&&(b?delete e[a][b]:
delete e[a])};b._gcNodeData=g._gcNodeData=function(){var a=k("[data-dojo-dataid]").map(d),b;for(b in e)0>l.indexOf(a,b)&&delete e[b]};m.extend(b,{data:b._adaptWithCondition(n,function(a){return 0===a.length||1==a.length&&"string"==typeof a[0]}),removeData:b._adaptAsForEach(p)});return b})},"widgets/Screening/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(g,k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C){return g([e,a,d,f],{baseClass:"jimu-widget-screening-locator-source-setting",templateString:x,_clickSet:!1,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,tr:null,nls:null,config:null,geocoderPopup:null,singleLineFieldName:null,serviceChooserContent:null,constructor:function(a){this._suggestible=this._clickSet=!1;this._locatorDefinition=null;this._esriLocatorRegExp=
/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g;this.serviceChooserContent=this.singleLineFieldName=this.geocoderPopup=this.config=this.nls=this.tr=null;k.mixin(this,a)},postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(l(this.setButtonNode,"click",k.hitch(this,this._onSetLocatorUrlClick)));this.own(l(this.locatorName,"Blur",k.hitch(this,
this._onLocatorNameBlur)));this.own(l(this.placeholder,"Blur",k.hitch(this,this._onPlaceholderBlur)));this.own(l(this.countryCode,"Blur",k.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new C({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new C({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processLocalSearchTable(!1);this.own(l(this.enableLocalSearch,"change",k.hitch(this,function(){this._processLocalSearchTable(this.enableLocalSearch.getValue())})));
m.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setDefinition:function(a){this._locatorDefinition=a||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var c=a.url;c&&(this.config=a,this.shelter.show(),this._locatorDefinition.url!==
c?this._getDefinitionFromRemote(c).then(k.hitch(this,function(a){c&&a&&"error"!==a.type?(this._locatorDefinition=a,this._locatorDefinition.url=c,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):c&&a&&"error"===a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(r.substitute({URL:a.url},k.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var a=
this.getConfig();return a.url&&a.name&&a.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:w.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:w.stripHTML(this.placeholder.get("value")),countryCode:w.stripHTML(this.countryCode.get("value")),maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",w.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",w.stripHTML(this.placeholder.get("value")))},
_onCountryCodeBlur:function(){this.countryCode.set("value",w.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1)},_setSourceItems:function(){var a=this.config;a.url&&(this.locatorUrl.set("value",a.url),this._processCountryCodeRow(a.url));a.name&&this.locatorName.set("value",w.stripHTML(a.name));a.singleLineFieldName&&(this.singleLineFieldName=a.singleLineFieldName);a.placeholder&&this.placeholder.set("value",w.stripHTML(a.placeholder));a.countryCode&&this.countryCode.set("value",w.stripHTML(a.countryCode));"capabilities"in this._locatorDefinition?(m.setStyle(this.enableLocalSearch.domNode,"display",""),
this._processLocalSearchTable(a.enableLocalSearch),this.enableLocalSearch.setValue(a.enableLocalSearch),a.localSearchMinScale&&a.enableLocalSearch&&this.localSearchMinScale.set("value",a.localSearchMinScale),a.localSearchDistance&&a.enableLocalSearch&&this.localSearchDistance.set("value",a.localSearchDistance)):(this.enableLocalSearch.setValue(!1),m.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?
this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!a.searchInCurrentMapExtent);this.maxSuggestions.set("value",a.maxSuggestions||6);this.maxResults.set("value",a.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_getDefinitionFromRemote:function(a){var c=new b;if(this._isEsriLocator(a))c.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",
alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var d=t({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(d);d.then(k.hitch(this,function(a){c.resolve(a)}),k.hitch(this,function(b){console.error(b);c.resolve({type:"error",url:this._getRequestUrl(a)})}))}return c.promise},_setMessageNodeContent:function(a,b){m.empty(this.messageNode);a.nodeType||(a=m.toDom(a));m.place(a,this.messageNode);
b?m.addClass(this.messageNode,"esriCTErrorMessage"):m.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(a){var c=window.location.protocol;return"http:"===c?n.setHttpProtocol(a):"https:"===c?n.setHttpsProtocol(a):a},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new h({url:this.locatorUrl.get("value")||""});
this.shelter=new v({hidden:!0});this.geocoderPopup=new u({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);m.setStyle(this.serviceChooserContent.domNode,"width","580px");m.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(l(this.serviceChooserContent,"validate-click",k.hitch(this,function(){m.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(l(this.serviceChooserContent,"ok",k.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(l(this.serviceChooserContent,"cancel",k.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(a){a&&a[0]&&a[0].url&&this.domNode&&(this.shelter.show(),t({url:a[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(k.hitch(this,function(c){this.shelter.hide();c&&c.singleLineAddressField&&
c.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",a[0].url),this.locatorName.get("value")||this.locatorName.set("value",q.getGeocoderName(a[0].url)),"capabilities"in c?(m.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(a[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),m.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=c.singleLineAddressField.name,
this._processCountryCodeRow(a[0].url),this._locatorDefinition=c,this._locatorDefinition.url=a[0].url,(this._suggestible=c.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new p({message:this.nls.locatorWarning})}),
k.hitch(this,function(c){console.error(c);this.shelter.hide();new p({message:r.substitute({URL:this._getRequestUrl(a[0].url)},k.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processLocalSearchTable:function(a){a?(m.removeClass(this.minScaleNode,"esriCTHidden"),m.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(m.addClass(this.minScaleNode,
"esriCTHidden"),m.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(a){this._isEsriLocator(a)?(this.countryCode.set("value",""),m.removeClass(this.countryCodeRow,"hide-country-code-row")):m.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){m.removeClass(this.tipsNode,"esriCTHidden");m.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){m.addClass(this.tipsNode,"esriCTHidden");
m.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&a.focusNode){var c=a.get("disabled");c&&a.set("disabled",!1);a.focusNode.focus();setTimeout(k.hitch(this,function(){a.focusNode.blur();c&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(g,k,m){return g([k],{baseClass:"jimu-geocode-service-chooser-content",
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(g){return new m(g)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(g,k,m,l,f){return g([k],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=f.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var b=this.inherited(arguments);return b=l.map(b,m.hitch(this,function(b){return{name:b.name,url:b.url}}))}})})},"widgets/Screening/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(g,k,m,l,f,b,e,a){return{map:null,layerInfosObj:null,
appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(a){this.map=a},setLayerInfosObj:function(a){this.layerInfosObj=a},setAppConfig:function(a){this.appConfig=a},getConfigInfo:function(a){if(a&&a.sources&&0<a.sources.length){var b=null;return this.searchLayer(this.map)&&a.upgradeFromGeocoder?(b=this.map.itemInfo.itemData.applicationProperties.viewing.search,b=k.map(b.layers,g.hitch(this,function(a,b){b.hintText=a;return this._getQueryTypeGeocoder(b)},
b.hintText)),f(b).then(g.hitch(this,function(b){a.sources=[].concat(b).concat(a.sources);return a}))):a}return l(this._getSourcesFromPortalAndWebmap()).then(g.hitch(this,function(a){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:a}}))},_getSourcesFromPortalAndWebmap:function(){var a=[],e=null;this.searchLayer(this.map)&&(e=this.map.itemInfo.itemData.applicationProperties.viewing.search,k.forEach(e.layers,g.hitch(this,function(b,d){d.hintText=b;a.push(this._getQueryTypeGeocoder(d))},e.hintText)));
return b.getPortalSelfInfo(this.appConfig.portalUrl).then(g.hitch(this,function(b){if((b=b.helperServices&&b.helperServices.geocode)&&0<b.length)for(var d=0,e=b.length;d<e;d++){var k=b[d];k&&a.push(this._processSingleLine(k))}return f(a).then(g.hitch(this,function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];e&&(e&&"query"===e.type||(e={name:e.name||this._getGeocodeName(e.url),url:e.url,singleLineFieldName:e.singleLineFieldName,placeholder:e.placeholder||e.name||this._getGeocodeName(e.url),maxResults:6,
searchInCurrentMapExtent:!1,type:"locator"},e.enableLocalSearch=this._isEsriLocator(e.url),e.localSearchMinScale=3E5,e.localSearchDistance=5E4),b.push(e))}return b}))}))},_getQueryTypeGeocoder:function(a){var b=this.map.getLayer(a.id),d=null,f=null,g=null,g=e.isDefined(a.subLayer)?a.id+"_"+a.subLayer:a.id,d=this.layerInfosObj.traversal(function(a){return a.id===g?(f=a,!0):!1});return b&&d&&f?(d=e.isDefined(a.subLayer)?f.url||b.url+"/"+a.subLayer:f.url||b.url,{name:f.title,layerId:g,url:d,placeholder:a.hintText,
searchFields:[a.field.name],displayField:a.field.name,exactMatch:a.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_processSingleLine:function(b){if(b.singleLineFieldName)return b;if(this._isEsriLocator(b.url))return b.singleLineFieldName="SingleLine",b;var d=new m;a({url:b.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,
function(a){a.singleLineAddressField&&a.singleLineAddressField.name?(b.singleLineFieldName=a.singleLineAddressField.name,d.resolve(b)):(console.warn(b.url+"has no singleLineFieldName"),d.resolve(null))}),g.hitch(this,function(a){console.error(a);d.resolve(null)}));return d.promise},_getGeocodeName:function(a){if("string"!==typeof a)return"geocoder";a=a.split("/");return a[a.length-2]||"geocoder"},getGeocoderName:function(a){return this._getGeocodeName(a)},hasAppSearchInfo:function(a){return a.itemInfo&&
a.itemInfo.itemData&&a.itemInfo.itemData.applicationProperties&&a.itemInfo.itemData.applicationProperties.viewing&&a.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(a){if(!this.hasAppSearchInfo(a))return!1;a=a.itemInfo.itemData.applicationProperties.viewing.search;return a.enabled&&0!==a.layers.length?!0:!1}}})},"widgets/Screening/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Screening/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n    \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n      \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" name\x3d"downloadOption" type\x3d"radio" data-dojo-type\x3d"jimu/dijit/RadioBtn" value\x3d"syncEnable"\r\n          data-dojo-attach-point\x3d"syncEnableRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3desriCTDownloadOptionLabel\x3e\r\n            ${nls.downloadTab.syncEnableOptionLabel}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" name\x3d"downloadOption" type\x3d"radio" data-dojo-type\x3d"jimu/dijit/RadioBtn" value\x3d"extractDataTask"\r\n          data-dojo-attach-point\x3d"gpServiceRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3desriCTDownloadOptionLabel\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionLabel}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton" title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" name\x3d"downloadOption" type\x3d"radio" data-dojo-type\x3d"jimu/dijit/RadioBtn" value\x3d"cannotDownload"\r\n          data-dojo-attach-point\x3d"cannotDownloadRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3desriCTDownloadOptionLabel\x3e\r\n            ${nls.downloadTab.cannotDownloadOptionLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton" title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable" data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TEXTAREA--\x3e\r\n        \x3ctextarea class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footnoteTextArea" rows\x3d"5"\x3e\x3c/textarea\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" class\x3d"portal-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"urlRadio" type\x3d"radio" checked data-dojo-attach-event\x3d"onclick: _onRadioClicked" class\x3d"url-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n  \x3ctable data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Screening/setting/FieldPicker.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"esriCTLayerFieldSelector"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"esriCTBtnAddSection"\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddLabel" data-dojo-attach-point\x3d"addFieldLabel"\x3e\r\n        ${nls.analysisTab.addFieldsLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidFields"\x3e\r\n      ${nls.analysisTab.noValidFieldsForAnalysis}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField esriCTSearchSourceFloatRight" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setSourceBtnClickNode"\r\n          title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.common.name}"\x3e\r\n        ${nls.common.name}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName" placeHolder\x3d"${nls.locatorName}"\r\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder" placeHolder\x3d"${nls.placeholder}"\r\n          data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode" placeHolder\x3d"${nls.countryCodeEg} USA,CHN"\r\n            data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/Screening/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTTabDiv" data-dojo-attach-point\x3d"tabContainer"\x3e\r\n      \x3c!--Analysis tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"analysisTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3c!--Add Layers section --\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"selectAnalysisLayerLabel" class\x3d"esriCTSelectAnalysisLayerLabel"\x3e\r\n              ${nls.analysisTab.selectAnalysisLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnAddLayer" class\x3d"esriCTBtnAddSection"\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddLabel"\x3e${nls.analysisTab.addLayerLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidLayers"\x3e\r\n              ${nls.analysisTab.noValidLayersForAnalysis}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.addLayersHintText}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n          \x3cdiv\x3e${nls.analysisTab.drawToolSelectableLayersLabel}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.drawToolSelectableLayersHint}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTSelectDrawToolLayerTableNode" data-dojo-attach-point\x3d"drawToolSelectableLayerContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Add Layers section end--\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--AOI Tools section--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.analysisTab.aoiToolsLegendLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"aoiToolsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTAnalysisAOIToolsDescriptionLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.aoiToolsDescriptionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Place Name section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"placeNameCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.placenameLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeNameTextBox" trim\x3d"true"\r\n                      required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Place Name section ends--\x3e\r\n                  \x3c!--Draw Tool section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"drawToolCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.drawToolsLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"drawToolTextBox" trim\x3d"true"\r\n                      required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Draw Tool section ends--\x3e\r\n                  \x3c!--Upload Shapfile section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"uploadShapefileCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.uploadShapeFileLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"uploadShapeFileTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Upload Shapfile section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Co-ordinates section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"coordinatesCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.coordinatesLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"coordinatesTextBox" trim\x3d"true"\r\n                      required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Co-ordinates section ends--\x3e\r\n                  \x3c!--Traverses Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"traverseUnitsNode"\x3e\r\n                        \x3coption value\x3d"uSSurveyFeet" selected\x3d"selected"\x3e${nls.units.uSSurveyFeet}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverses Units section ends--\x3e\r\n                  \x3c!--Traverse Direction Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits esriCTTraverseDirectionUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"traverseDirectionUnitsNode"\x3e\r\n                        \x3coption value\x3d"decimalDegree" selected\x3d"selected"\x3e${nls.units.decimalDegree}\x3c/option\x3e\r\n                        \x3coption value\x3d"degreeMinuteSeconds"\x3e${nls.units.degreeMinuteSeconds}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesBearingDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverse Direction Units section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Tools section ends--\x3e\r\n          \x3c!--Allow Uploading shapefiles section starts--\x3e\r\n          \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"uploadShapefileSection"\x3e\r\n              \x3c!--upload shapefile options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"allowUploadShapefileCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowShapefilesUploadLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowShapefilesUploadLabelHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--upload shapefile options section ends--\x3e\r\n              \x3c!--layer analysis options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"allowVisibleLayerAnalysisCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowVisibleLayerAnalysisLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowVisibleLayerAnalysisHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--layer analysis options section ends--\x3e\r\n              \x3c!--Area units options section starts--\x3e\r\n              \x3c!-- \x3cdiv class\x3d"esriCTAreaUnitsMainContainer"\x3e --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.areaUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"areaUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"Feet"\x3e${nls.units.feetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Miles"\x3e${nls.units.milesUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Meters"\x3e${nls.units.metersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Kilometers"\x3e${nls.units.kilometersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Hectares"\x3e${nls.units.hectaresUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3c/div\x3e --\x3e\r\n              \x3c!--units options section ends--\x3e\r\n              \x3c!--max feature for analysis starts--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel"\x3e\r\n                  ${nls.analysisTab.maxFeatureForAnalysisLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"maxFeatureCountTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.maxFeatureForAnalysisHintText}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--max feature for analysis ends--\x3e\r\n              \x3c!--search tolerance--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv" data-dojo-attach-point\x3d"toleranceSection"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel" data-dojo-attach-point\x3d"searchToleranceLabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"searchToleranceTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.searchToleranceHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--search tolerance ends--\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!--Allow Uploading shapefiles section ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Analysis tab contents end--\x3e\r\n      \x3c!--Download tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"downloadTabNode" class\x3d"esriCTTabNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Download tab contents end--\x3e\r\n      \x3c!--General tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--Tab Labels Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.tabLabelsLegend}\x3c/legend\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"tabLabelsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--AOI Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.AOITabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"aoiTabTextBox" trim\x3d"true"\r\n                      required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--AOI Tab label section ends--\x3e\r\n                  \x3c!--Reports Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.ReportTabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"reportsTabTextBox" trim\x3d"true"\r\n                      required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Reports Tab label section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Tab Labels Fieldset ends--\x3e\r\n          \x3c!--Buffer Settings Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.bufferSettingsLegend}\x3c/legend\x3e\r\n            \x3c!--Buffer Settings Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"bufferSettingsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3c!--Default Buffer Settings section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Default Buffer Distance section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferDistanceLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"defaultBufferDistanceTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Default Buffer Distance section ends--\x3e\r\n                  \x3c!--Buffer Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferUnitsLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTGeneralDropDownContainer"\x3e\r\n                        \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"defaultBufferUnitsNode"\x3e\r\n                          \x3coption value\x3d"UNIT_FOOT"\x3e${nls.units.feet}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_STATUTE_MILE"\x3e${nls.units.miles}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_KILOMETER"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_METER"\x3e${nls.units.meters}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Buffer Units section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Default Buffer Settings section ends--\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions esriCTGeneralBufferSymbologyContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                          ${nls.generalTab.aoiBufferSymbologyLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"aoiSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTGeneraBufferSymbologylHint"\x3e\r\n                          ${nls.generalTab.generalBufferSymbologyHint}\r\n                        \x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Buffer Settings Fieldset ends--\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.generalTab.aoiGraphicsSymbologyLegend}\x3c/legend\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                  ${nls.generalTab.aoiGraphicsSymbologyHint}\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.pointSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.lineSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.polygonSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonPreview" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section ends--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section ends--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--General tab contents end--\x3e\r\n      \x3c!-- Search Source Settings tab --\x3e\r\n      \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/css/style.css":".jimu-widget-screening-setting .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTFieldError {float: right; line-height: 0;}.jimu-widget-screening-setting .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-screening-setting .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .row {clear: both;}.jimu-widget-screening-setting .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-screening-setting::-ms-clear {display: none;}.jimu-widget-screening-setting .esriCTFieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-screening-setting .esriCTFieldSetLegend {margin-left: 20px;}.jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {width: 100%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {float: right;}.jimu-widget-screening-setting .esriCTTextBox {width: 90%; margin-top: 10px;}.jimu-widget-screening-setting .esriCTFieldsetMainContainer {clear: both; width: 95%; margin: 0 auto; padding-top: 5px;}.jimu-widget-screening-setting .esriCTFieldsetContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTFieldsLabel {float: left; padding-left: 10px; width: 80%;}.jimu-widget-screening-setting .esriCTCheckBox {float: left; margin-right: 0px;}.jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {padding: 10px 0; width: 100%;}.jimu-widget-screening-setting .esriCTAOIToolsOptions {width: 33%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTTraverseUnits {width: 31%; float: left; padding-right: 10px; padding-top: 36px;}.jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 16px;}.jimu-widget-screening-setting .esriCTDropBox {width: 100%;}.jimu-widget-screening-setting .esriCTDropDownContainer {width: 100%; float: left; padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTFieldChooserDropdown, .jimu-widget-screening-setting .esriCTFieldValidationTextBox {height: 26px; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTAddLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTSelectDrawToolLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTBtnAddSection, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-screening-setting .esriCTLayerFieldSelector .jimu-simple-table {max-height: 350px !important;}.jimu-widget-screening-setting .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/custom-button-enable.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIconDisable {background-image: url(images/custom-button-disable.png) !important;}.jimu-widget-screening-setting .esriCTBtnAddLabel, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddLabel {height: 100%; line-height: 20px; margin-left: 7px; text-decoration: none; display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;}.jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px;}.jimu-widget-screening-setting .esriCTNoLayersOrFieldsForAnalysisLabel {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-screening-setting .esriCTTRPreviewText {height: 26px;}.jimu-widget-screening-setting .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 0;}.jimu-widget-screening-setting .esriCTAllowShapeFileOption {padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {width: 60%; float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {width: 100%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureInputParentContainer {clear: both; width: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTMaxFeatureTextBox {width: 200px; float: left; margin: 0px 5px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: right;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureTextBox {float: right; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriCTDownloadRadioButton {float: left;}.jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: left; width: 97%; margin-left: 10px;}.jimu-widget-screening-setting .esriCTLayerDownloadOptionTable {margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTTableHeader {text-align: center;}.jimu-widget-screening-setting .esriCTAvailableDownloadOption {background: url(../css/images/check.png) center no-repeat;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTDownloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabReportTitleContainer {width: 100%; float: left; margin-bottom: 15px; padding-top: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-screening-setting .esriCTDownloadTabTextbox {width: 55%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabReportInputNode {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-widget-screening-setting .esriCTDownloadTabFieldSet {padding: 15px 0px;}.jimu-widget-screening-setting .esriCTDownloadOptionForm, .jimu-widget-screening-setting .esriCTReportSettingsContainer {margin: 0px auto; width: 96%;}.jimu-widget-screening-setting .esriCTFootnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-widget-screening-setting .esriCTLogoChooserDiv {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTImageChooserPreviewContainer {position: relative;}.jimu-widget-screening-setting .esriCTImageChooserPreview {position: absolute; top: 0; bottom: 0; margin: auto; max-height: 100%;}.jimu-widget-screening-setting .esriCTImageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-screening-setting .esriCTColorChooserNode {text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: left; margin-bottom: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: right; margin-right: 10px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadRadioButton {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabSetButton {float: left; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabTextbox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: right;}.jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {width: 45%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralDropDownContainer {width: 90%; float: left; margin-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {max-width: 50%; width: auto; min-width: 15px; float: left; color: rgb(89, 102, 121); font-size: 14px; line-height: 40px;}.jimu-widget-screening-setting .esriCTGeneralBufferSymbologyContainer {width: 100%;}.jimu-widget-screening-setting .esriCTGeneraBufferSymbologylHint {clear: both;}.jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: left; padding-left: 0px; width: 80%;}.jimu-widget-screening-setting .esriCTSymbolChooserNode {cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTSymbolPreviewText {padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-screening-setting .esriCTPreviewField {float: left; margin-bottom: 5px; padding: 5px 0px 0px 45px;}.jimu-widget-screening-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-screening-setting .esriCTPolygonPreview {float: left; margin-top: 5px; margin-bottom: 5px; padding: 5px 0px 0px 0px;}.claro .dijitTextBox, .claro .dijitSelect {color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner {color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer {background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField {background-color: #fafafc !important; color: #7989a0; font-size: 14px;}.claro .dijitTextBox, .claro .dijitSelect {border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-screening-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-screening-setting .esriCTURLSetButton {height: 30px; line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTlabel {width: 25%; padding: 5px 10px 5px 0px; word-break: break-all; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; background-repeat: no-repeat; background-position: left; position: relative; padding-left: 16px; color: #518dca; background-image: url(images/add.png); cursor: pointer;}.jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-screening-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-screening-setting .esriCTSources {height: 366px;}.jimu-widget-screening-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-screening-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-screening-setting .esriCTSourceSetting {width: 650px; position: relative;}.jimu-widget-screening-setting .source-table, .jimu-widget-screening-setting .general-setting-table {width: 100%;}.jimu-widget-screening-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-screening-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-screening-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-screening-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-screening-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-screening-setting .esriCTsearchFieldsSelector {display: inline-block; background-repeat: no-repeat; background-position: center; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background-image: url(images/selector.png);}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-screening-setting .esriCTURLWidthLabel {width: 105px; min-width: 105px;}.jimu-widget-screening-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-screening-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-screening-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-screening-setting .esriCTLayerContainer {width: 100%; float: left; margin: 0px;}.jimu-widget-screening-setting .esriCTLayerField {float: left;}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-screening-setting .esriCTErrorMessage {color: #e84b4b;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTHint {float: right; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetLegend {margin-right: 20px;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsetContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsLabel {padding-left: 0px; padding-right: 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAOIToolsOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBtnAddLabel {margin-right: 7px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 8px; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: right; padding-left: 0px; width: 80%;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPreviewField {float: right; padding: 5px 45px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding-right: 0px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-screening-setting .esriCTSearchSourceURLField {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-screening-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriRTLTabContainerNode{overflow: overlay;}.jimu-widget-screening-download-settings .esriCTDefaultLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {clear: both; float: left;}.jimu-widget-screening-download-settings .esriCTAddLayoutText {float: left; padding-left: 10px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutHintText {clear: both}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateContainer {clear: both; width: 100%; padding-bottom: 15px; overflow: auto;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: left; width: 35%;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: left; width: 33%;}.jimu-widget-screening-download-settings .esriCTCustomOptionButtonDisable {color: #808080 !important; cursor: default;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: right;}",
"*now":function(g){g(['dojo/i18n!*preload*widgets/Screening/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 jimu/BaseWidgetSetting dojo/_base/lang dojo/on dojo/query dojo/_base/array jimu/utils esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils jimu/utils jimu/dijit/LoadingIndicator ./SymbolChooserPopup ./DownloadSettings dojo/query dijit/registry jimu/dijit/Message jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/SimpleTable dojo/dom-class jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox ./FieldPicker ./SearchSourceSettings dojo/string dojo/Deferred dojo/promise/all dojo/dom-style jimu/LayerInfos/LayerInfos esri/request dijit/form/Select".split(" "),function(g,
k,m,l,f,b,e,a,d,n,p,h,u,v,t,r,q,w,x,C,c,B,z,F,H,y,G,D,I,L,K,M,O){return g([l,k],{baseClass:"jimu-widget-screening-setting",_configurationTabsContainer:null,_symbolParams:{},_addLayerTable:null,_curRow:null,_totalLayers:[],_idsOfSelectedLayers:[],_layerInfosObj:null,_selectLayerTable:null,constructor:function(a){this._configurationTabsContainer=null;this._symbolParams={};this._curRow=this._addLayerTable=null;this._totalLayers=[];this._idsOfSelectedLayers=[];this._selectLayerTable=null;f.mixin(this,
a)},postMixInProperties:function(){this.nls.common={};f.mixin(this.nls.common,window.jimuNls.common);f.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){M.getInstance(this.map,this.map.itemInfo).then(f.hitch(this,function(a){this._layerInfosObj=a;this._initLoading();this._initConfiguration();this._initLayerSelector();this._initDownloadTab()}))},getConfig:function(){var a,c;if(q(".esriCTFieldError",this.addLayerTableNode).length!==q(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length)return this._showErrorMsgforInvalidFields(),
!1;c=this._downloadTab.getExtractDataTaskURL();if(this._validateConfigForCheckBoxes()&&this._validateConfigForInputFields(this.aoiToolsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"analysis")&&this._validateConfigForInputFields(this.toleranceSection,this.nls.errorMsg.invalidSearchToleranceErrorMsg,"analysis")&&this._validateConfigForInputFields(this.tabLabelsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"general")&&this._validateConfigForBufferDistanceFields(this.bufferSettingsSection,
this.nls.errorMsg.bufferDistanceFieldsErrorMsg)&&this._validateGPTaskDownloadOption(c)&&this._validateLayers()&&this._validateMaxFeatureCount()&&this._validateCustomOptions()){a=this._searchSourceSettings.getConfig();if(!a||0===a.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;var b=this.placeNameTextBox.get("value");this.config.placenameButtonText=u.stripHTML(b?b:"");this.config.showPlacenameWidget=
this.placeNameCheckBox.checked;this.config.showDrawToolsWidget=this.drawToolCheckBox.checked;this.config.showShapefileWidget=this.uploadShapefileCheckBox.checked;this.config.showCoordinatesWidget=this.coordinatesCheckBox.checked;this.config.allowShapefilesUpload=this.allowUploadShapefileCheckBox.checked;this.config.allowVisibleLayerAnalysisOnly=this.allowVisibleLayerAnalysisCheckBox.checked;b=this.aoiTabTextBox.get("value");this.config.aoiTabText=u.stripHTML(b?b:"");b=this.reportsTabTextBox.get("value");
this.config.reportTabText=u.stripHTML(b?b:"");b=this.drawToolTextBox.get("value");this.config.drawToolsButtonText=u.stripHTML(b?b:"");b=this.uploadShapeFileTextBox.get("value");this.config.shapefileButtonText=u.stripHTML(b?b:"");b=this.coordinatesTextBox.get("value");this.config.coordinatesButtonText=u.stripHTML(b?b:"");this.config.traverseUnit=this.traverseUnitsNode.get("value");this.config.traverseDirectionUnit=this.traverseDirectionUnitsNode.get("value");this.config.maxFeaturesForAnalysis=this.maxFeatureCountTextBox.get("value");
this.config.areaUnits=this.areaUnitsDropDown.get("value");this.config.defaultBufferDistance=this.defaultBufferDistanceTextBox.get("value");this.config.defaultBufferUnit=this.defaultBufferUnitsNode.get("value");this.config.searchTolerance=this.searchToleranceTextBox.get("value");this.config.placenameSymbology=this._symbolParams;this.config.coordinatesSymbology=this._symbolParams;this.config.shapefileSymbology=this._symbolParams;this.config.drawToolSymbology=this._symbolParams;this.config.aoiSymbol=
this._symbolParams.aoiSymbol;this.config.layers=this._getSelectedLayers(!1);this.config.searchSourceSettings=a;this.config.downloadSettings={type:q("input[type\x3dradio]:checked",this.downloadTabNode)[0].value,layers:this._downloadTab.getLayers(),extractDataTaskURL:c,downloadingFileOptions:this._downloadTab.getDownloadingFileOptions()};this.config.reportSettings={printTaskURL:this._downloadTab.getPrintReportGPServiceURL(),footnote:this._downloadTab.getFootnoteForReport(),logo:this._downloadTab.getLogo(),
columnTitleColor:this._downloadTab.getTableHeaderColor(),reportTitle:this._downloadTab.getReportTitle(),customOptions:this._downloadTab.getCustomOptions(),defaultPrintOption:this._downloadTab.getDefaultPrintOption()};this.config.drawToolSelectableLayers=this._getDrawToolSelectableLayers();return this.config}return!1},_getDrawToolSelectableLayers:function(){var b,c;b=[];c=this._selectLayerTable.getRows();a.forEach(c,f.hitch(this,function(a){a=this._selectLayerTable.getRowData(a);a.selectable&&b.push(a.selectableLayerID)}));
return b},_validateLayers:function(){var a=!0;0===this._getSelectedLayers(!1).length&&(a=!1,this._errorMessage(this.nls.errorMsg.noLayerSelected,this.nls.analysisTab.analysisTabLabel));return a},_validateDuplicateLabelsForFields:function(a){var b=!0,c=[],d;for(d in a){var c=[],e;for(e in a)a[d]===a[e]&&c.push({label:e,item:a[d]});if(1<c.length)break}this._showDuplicateLabelsErrorMessage(c)||(b=!1);return b},_showDuplicateLabelsErrorMessage:function(b){var c;return 1<b.length?(c="",a.forEach(b,f.hitch(this,
function(a,d){c+=a.label;d<b.length-1&&(c+=",")})),this._errorMessage(D.substitute(this.nls.errorMsg.duplicateFieldsLabels,{labelText:b[0].item,itemNames:c}),this.nls.analysisTab.analysisTabLabel),!1):!0},_initConfiguration:function(){var c;this._symbolParams={};this.defaultBufferDistanceTextBox.constraints={min:0};this.defaultBufferDistanceTextBox.validator=f.hitch(this,function(){return this._numberValidator(this.defaultBufferDistanceTextBox)});this.maxFeatureCountTextBox.constraints={min:1,places:0};
this.searchToleranceTextBox.constraints={min:0};this.searchToleranceTextBox.intermediateChanges=!0;c=[{node:this.pointSymbolNode,symbolType:"point",geometryType:"esriGeometryPoint",title:this.nls.generalTab.pointSymbolChooserPopupTitle},{node:this.lineSymbolNode,symbolType:"polyline",geometryType:"esriGeometryLine",title:this.nls.generalTab.lineSymbolChooserPopupTitle},{node:this.polygonSymbolNode,symbolType:"polygon",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.polygonSymbolChooserPopupTitle},
{node:this.aoiSymbolNode,symbolType:"aoiSymbol",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.aoiSymbolChooserPopupTitle}];this._initTabs();this._enableDisableAOIToolsTextBox();a.forEach(c,f.hitch(this,function(a){this._createSymbolPicker(a.node,a.symbolType,a.geometryType,a.title)}));b(this.areaUnitsDropDown,"change",f.hitch(this,function(a){this._displaySearchTolerance(a)}));this.searchToleranceTextBox.validator=f.hitch(this,function(){return this._numberValidator(this.searchToleranceTextBox)})},
_numberValidator:function(a){a=a.get("value");return isNaN(a)?!1:!0},_initTabs:function(){this._configurationTabsContainer=new m({tabs:[{title:this.nls.analysisTab.analysisTabLabel,content:this.analysisTabNode},{title:this.nls.downloadTab.downloadTabLabel,content:this.downloadTabNode},{title:this.nls.generalTab.generalTabLabel,content:this.generalTabNode},{title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,content:this.searchSourceTabNode}]},this.tabContainer);this.own(b(this._configurationTabsContainer,
"tabChanged",f.hitch(this,function(){this._configurationTabsContainer.containerNode.scrollTop=0})));this.own(b(this._configurationTabsContainer.containerNode,"scroll",f.hitch(this,function(){var b;b=this._addLayerTable.getRows();a.forEach(b,f.hitch(this,function(a){a.layerSelector&&a.layerSelector.hideLayerChooser()}));this._searchSourceSettings&&this._searchSourceSettings._currentSourceSetting&&this._searchSourceSettings._currentSourceSetting.displayField&&this._searchSourceSettings._currentSourceSetting.displayField.closeDropDown();
this.traverseUnitsNode.closeDropDown();this.traverseDirectionUnitsNode.closeDropDown();this.areaUnitsDropDown.closeDropDown();this.defaultBufferUnitsNode.closeDropDown();this._downloadTab.closeDownloadTabDropdowns()})));this._configurationTabsContainer.startup();u.has("chrome")&&z.add(this._configurationTabsContainer.containerNode,"esriRTLTabContainerNode")},_initLoading:function(){var a;this.loading=new v({hidden:!0});a=e(".widget-setting-popup")[0];this.loading.placeAt(a);this.loading.startup()},
_createSearchSourceSettings:function(){var a={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(a=this.config.searchSourceSettings);this._searchSourceSettings=new G({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this.loading,config:a},p.create("div",{},this.searchSourceTabNode));this.own(b(this._searchSourceSettings,"invalid-source-setting",f.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle)})))},
setConfig:function(){if(this.config){this.config.aoiTabText?this.aoiTabTextBox.set("value",this.config.aoiTabText):this.aoiTabTextBox.set("value",this.nls.generalTab.aoiTabText);this.config.reportTabText?this.reportsTabTextBox.set("value",this.config.reportTabText):this.reportsTabTextBox.set("value",this.nls.generalTab.reportTabText);this.config.placenameButtonText?this.placeNameTextBox.set("value",this.config.placenameButtonText):this.placeNameTextBox.set("value",this.nls.analysisTab.placenameButtonText);
this.config.drawToolsButtonText?this.drawToolTextBox.set("value",this.config.drawToolsButtonText):this.drawToolTextBox.set("value",this.nls.analysisTab.drawToolsButtonText);this.config.shapefileButtonText?this.uploadShapeFileTextBox.set("value",this.config.shapefileButtonText):this.uploadShapeFileTextBox.set("value",this.nls.analysisTab.shapefileButtonText);this.config.coordinatesButtonText?this.coordinatesTextBox.set("value",this.config.coordinatesButtonText):this.coordinatesTextBox.set("value",
this.nls.analysisTab.coordinatesButtonText);(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceTextBox.set("value",this.config.defaultBufferDistance);this.config.traverseUnit&&this._setDropDownSavedOptionSelected(this.traverseUnitsNode,this.config.traverseUnit);this.config.traverseDirectionUnit&&this._setDropDownSavedOptionSelected(this.traverseDirectionUnitsNode,this.config.traverseDirectionUnit);this.config.areaUnits&&("Standard"===this.config.areaUnits||
"Metric"===this.config.areaUnits?this._setBackwardCompatibilityAreaUnit(this.areaUnitsDropDown,this.config.areaUnits):this._setDropDownSavedOptionSelected(this.areaUnitsDropDown,this.config.areaUnits));this.config.maxFeaturesForAnalysis&&this.maxFeatureCountTextBox.set("value",this.config.maxFeaturesForAnalysis);this.config.defaultBufferUnit&&this._setDropDownSavedOptionSelected(this.defaultBufferUnitsNode,this.config.defaultBufferUnit);(this.config.searchTolerance||0===this.config.searchTolerance)&&
this.searchToleranceTextBox.set("value",this.config.searchTolerance);this._displaySearchTolerance(this.areaUnitsDropDown.get("value"));this.placeNameCheckBox.setValue(this.config.showPlacenameWidget);this.drawToolCheckBox.setValue(this.config.showDrawToolsWidget);this.uploadShapefileCheckBox.setValue(this.config.showShapefileWidget);this.coordinatesCheckBox.setValue(this.config.showCoordinatesWidget);this.allowUploadShapefileCheckBox.setValue(this.config.allowShapefilesUpload);this.allowVisibleLayerAnalysisCheckBox.setValue(this.config.allowVisibleLayerAnalysisOnly);
if(this._addLayerTable&&this.config.layers){this._addLayerTable.clear();for(var a=0;a<this.config.layers.length;a++)this._populateLayerTableRow(this.config.layers[a],!1)}this._createSearchSourceSettings()}},_displaySearchTolerance:function(a){this.searchToleranceTextBox.get("value");this.searchToleranceLabel.innerHTML="Feet"===a||"Miles"===a?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.feet+")":"Meters"===a||"Kilometers"===a||"Hectares"===a?this.nls.analysisTab.searchToleranceLabelText+
" ("+this.nls.units.meters+")":this.nls.analysisTab.searchToleranceLabelText},_onEditLayerClicked:function(a){var b=a.layerInfo;this._curRow=a;a.layerSelector&&a.layerSelector.hideLayerChooser();b||(b={selectedFields:null},a.layerInfo=b);b.layerLabel=a.labelText.value;a.layerSelector.getSelectedItem()&&(a.layerSelector.getSelectedItem().name&&(b.layerName=a.layerSelector.getSelectedItem().name),a.layerSelector.getSelectedItem().layerInfo&&(b.layer=a.layerSelector.getSelectedItem().layerInfo));this._createFieldSelectorPopup({nls:this.nls,
featureLayer:b.layer.layerObject,selectedFields:a.selectedFields,layerGridInfo:b},a)},_createFieldSelectorPopup:function(a,b){var c,d,e,g=!0,h;h=a.layerGridInfo.selectedFields;var k=new y(a);d=p.create("button",{title:this.nls.common.ok});d.label=this.nls.common.ok;e=p.create("button",{title:this.nls.common.cancel});e.label=this.nls.common.cancel;c=new C({titleLabel:this.nls.analysisTab.addFieldsPopupTitle+": "+b.layerSelector.getSelectedItem().name,content:k,width:830,height:500,autoHeight:!0,buttons:[d,
e]});d.onClick=f.hitch(this,function(){var b={};g=!0;this._curRow.selectedFields=k.okButtonClicked();this._validateFields(this._curRow.selectedFields,this._curRow);for(var d in this._curRow.selectedFields)""!==this._curRow.selectedFields[d].label.trim()&&(b[this._curRow.selectedFields[d].alias]=this._curRow.selectedFields[d].label.trim());(g=this._validateDuplicateLabelsForFields(b))?(this._curRow=null,k.destroy(),k=null,c.close()):this._curRow.selectedFields=a.layerGridInfo.selectedFields=h});e.onClick=
f.hitch(this,function(){this._curRow=null;k.destroy();k=null;c.close()})},_enableDisableAOIToolsTextBox:function(){this.own(b(this.placeNameCheckBox,"change",f.hitch(this,function(a){a?this.placeNameTextBox.set("disabled",!1):this.placeNameTextBox.set("disabled",!0)})));this.own(b(this.drawToolCheckBox,"change",f.hitch(this,function(a){a?this.drawToolTextBox.set("disabled",!1):this.drawToolTextBox.set("disabled",!0)})));this.own(b(this.uploadShapefileCheckBox,"change",f.hitch(this,function(a){a?this.uploadShapeFileTextBox.set("disabled",
!1):this.uploadShapeFileTextBox.set("disabled",!0)})));this.own(b(this.coordinatesCheckBox,"change",f.hitch(this,function(a){a?(this.coordinatesTextBox.set("disabled",!1),this.traverseUnitsNode.set("disabled",!1),this.traverseDirectionUnitsNode.set("disabled",!1)):(this.coordinatesTextBox.set("disabled",!0),this.traverseUnitsNode.set("disabled",!0),this.traverseDirectionUnitsNode.set("disabled",!0))})))},_setBackwardCompatibilityAreaUnit:function(b,c){"Standard"===c?(c="Miles",b.set("value","Miles")):
"Metric"===c&&(c="Kilometers",b.set("value","Kilometers"));a.forEach(b.options,f.hitch(this,function(a){a.selected=a.value===c?"selected":!1}))},_setDropDownSavedOptionSelected:function(b,c){b.setValue(c);a.forEach(b.options,f.hitch(this,function(a){a.selected=a.value===c?"selected":!1}))},_validateConfigForInputFields:function(b,c,d){var e=!0;a.some(q(".esriCTTextBox",b),f.hitch(this,function(a){if(w.byNode(a)&&!w.byNode(a).disabled&&!w.byNode(a).isValid())return"analysis"===d?this._errorMessage(c,
this.nls.analysisTab.analysisTabLabel):this._errorMessage(c,this.nls.generalTab.generalTabLabel),e=!1,!0}));return e},_validateConfigForBufferDistanceFields:function(b,c){var d=!0;a.some(q(".esriCTTextBox",b),f.hitch(this,function(a){if(w.byNode(a)&&(!w.byNode(a).isValid()||isNaN(w.byNode(a).get("value"))))return this._errorMessage(c,this.nls.generalTab.generalTabLabel),d=!1,!0}));return d},_validateConfigForCheckBoxes:function(){var b=!1;a.some(q(".esriCTCheckBox",this.aoiToolsSection),f.hitch(this,
function(a){if(w.byNode(a).checked)return b=!0}));b||this._errorMessage(this.nls.errorMsg.atLeastOneCheckboxCheckedErrorMsg,this.nls.analysisTab.analysisTabLabel);return b},_errorMessage:function(a,b){(new x({message:a,buttons:[{label:this.nls.common.ok}]})).message=a;this._configurationTabsContainer&&b&&this._configurationTabsContainer.getSelectedTitle()!==b&&this._configurationTabsContainer.selectTab(b)},_createSymbolPicker:function(a,c,e,g){var h={},k,l;e&&(h.type=d.getSymbolTypeByGeometryType(e),
h.symbol=this.config&&this.config.placenameSymbology[c]?n.fromJson(this.config.placenameSymbology[c]):n.fromJson(this.config.aoiSymbol),k=this._createPreviewContainer(a,!1),l={symbolChooserTitle:g,symbolParams:h,symbolType:c,nls:this.nls},this._showSelectedSymbol(k,h.symbol,c),this.own(b(k,"click",f.hitch(this,function(){h.symbol=n.fromJson(this._symbolParams[c]);this._initSymbolChooserPopup(l,k)}))));return k},_createPreviewContainer:function(a,b){b&&(a=p.create("table",{cellspacing:"0",cellpadding:"0"},
a),a=p.create("tr",{"class":"esriCTTRPreviewText"},a),b=p.create("td",{},a),p.create("div",{innerHTML:this.nls.generalTab.previewLabel,"class":"esriCTSymbolPreviewText"},b),a=p.create("td",{},a));return a=p.create("div",{"class":"esriCTSymbolChooserNode"},a)},_initSymbolChooserPopup:function(a,b){var c=new t(a);c.onOkClick=f.hitch(this,function(){var d;c.symbolChooser.getValidSymbol?(d=c.symbolChooser.getValidSymbol())?(this._showSelectedSymbol(b,d,a.symbolType),c.popup.close()):this._errorMessage(this.nls.generalTab.invalidSymbolValue):
(d=c.symbolChooser.getSymbol(),this._showSelectedSymbol(b,d,a.symbolType),c.popup.close())})},_showSelectedSymbol:function(a,b,c){p.empty(a);if(b){var d=h.createSymbolNode(b);d||(d=p.create("div"));p.place(d,a);this._symbolParams[c]=b.toJson()}},_initDownloadTab:function(){this._downloadTab=new r({map:this.map,downloadOptions:this.config.downloadSettings,reportSettings:this.config.reportSettings,loadingIndicator:this.loading,nls:this.nls,appConfig:this.appConfig,folderUrl:this.folderUrl,layerInfosObj:this._layerInfosObj});
this._downloadTab.placeAt(this.downloadTabNode)},_setDownloadInfo:function(a){var b,c;this._downloadTab&&(b=this._getLayerInfo(a,!0))&&(c=O({url:b.url+"?f\x3dpjson"}),c.then(f.hitch(this,function(c){b.capabilities=c.capabilities;this._downloadTab.checkLayerForDownloadOptions(b,a.rowIndex)})))},_removeDownloadInfo:function(a){this._downloadTab&&this._downloadTab.deleteRow(a)},_validateGPTaskDownloadOption:function(a){return"extractDataTask"===q("input[type\x3dradio]:checked",this.downloadTabNode)[0].value&&
""===a?(this._errorMessage(this.nls.downloadTab.errorMessages.noExtractDataTaskURL,this.nls.downloadTab.downloadTabLabel),!1):!0},_getSelectedLayers:function(b){var c,d=[],e;e=this._addLayerTable.getRows();a.forEach(e,f.hitch(this,function(a){a.layerSelector&&(c=this._getLayerInfo(a,b),c.selectedFields=a.selectedFields,d.push(c))}));return d},_getLayerInfo:function(a,b){var c,d;if(d=a.layerSelector.getSelectedItem())c={url:d.layerInfo.layerObject.url,geometryType:d.layerInfo.layerObject.geometryType,
id:d.layerInfo.id,label:u.stripHTML(a.labelText&&a.labelText.value?a.labelText.value.trim():""),layerName:d.layerInfo.title,layerVersion:d.layerInfo.layerObject.version},b&&(c.capabilities=d.layerInfo.layerObject.capabilities),a.layerInfo&&a.layerInfo.selectedFields&&(c.selectedFields=a.layerInfo.selectedFields),c.layerId=d.layerId?d.layerId:c.url.substr(c.url.lastIndexOf("/")+1,c.url.length),a=c.url.substr(0,c.url.lastIndexOf("/")+1),c.baseURL=a;return c},_createLayerChooserMapArgs:function(){return{multiple:!1,
createMapResponse:this.map.webMapResponse,filter:F.createFeaturelayerFilter([],!1,!1)}},_initLayerSelector:function(){var a;this.loading.show();this._idsOfSelectedLayers=[];this._totalLayers=[];a=this._createLayerChooserMapArgs();this._layerChooserFromMap=new F(a);this._layerChooserFromMap.startup();a=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var c=[];this._getAllFilteredLayers(a,c);L(c).then(f.hitch(this,function(){this.loading.hide();0<this._totalLayers.length?z.remove(this.btnAddLayer,
"esriCTDisabled"):(z.add(this.btnAddLayer,"esriCTDisabled"),z.remove(this.lblNoValidLayers,"esriCTHidden"));this._createAddLayerGrid();this._createSelectLayerGrid();this.setConfig(this.config);this.own(b(this.btnAddLayer,"click",f.hitch(this,this._addLayerButtonClicked)));this._populateSelectableLayer()}))},_getAllFilteredLayers:function(b,c){a.forEach(b,f.hitch(this,function(a){var b;a.isLeaf()?(b=new I,this._layerChooserFromMap.filter(a).then(f.hitch(this,function(c){c&&this._totalLayers.push(a);
b.resolve()})),c.push(b)):this._getAllFilteredLayers(a.newSubLayers,c)}))},_captureAddLayerTableEvents:function(){var a,c,d;this.own(b(this._addLayerTable,"actions-edit",f.hitch(this,this._onEditLayerClicked)));this.own(b(this._addLayerTable,"row-up",f.hitch(this,function(b){a=this._idsOfSelectedLayers[b.rowIndex];c=this._idsOfSelectedLayers[b.rowIndex+1];this._idsOfSelectedLayers.splice(b.rowIndex,2,c,a);this._downloadTab&&this._downloadTab.rowUp(b.rowIndex)})));this.own(b(this._addLayerTable,"row-down",
f.hitch(this,function(a){d=this._idsOfSelectedLayers[a.rowIndex];c=this._idsOfSelectedLayers[a.rowIndex-1];this._idsOfSelectedLayers.splice(a.rowIndex-1,2,d,c);this._downloadTab&&this._downloadTab.rowDown(a.rowIndex)})));this._addLayerTable.onBeforeRowDelete=f.hitch(this,this._deleteLayer)},_createAddLayerGrid:function(){this._addLayerTable=new B({fields:[{name:"field",title:this.nls.analysisTab.addLayerNameTitle,type:"empty",editable:"true",width:"200px"},{name:"field",title:this.nls.common.label,
type:"empty",editable:"true",width:"200px"},{name:"actions",title:this.nls.common.actions,width:"80px",type:"actions",actions:["up","down","edit","delete"]}],selectable:!1});this._addLayerTable.placeAt(this.addLayerTableNode);this._captureAddLayerTableEvents();this._addLayerTable.startup()},_createSelectLayerGrid:function(){this._selectLayerTable=new B({fields:[{name:"selectable",title:"",type:"checkbox","class":"isSelectable",width:"5%",editable:!0,hidden:!1},{name:"selectableLayerName",title:this.nls.analysisTab.addLayerNameTitle,
type:"text",editable:!1,width:"95%",hidden:!1},{name:"selectableLayerID",title:"",type:"text",editable:!1,width:"0%",hidden:!0}],selectable:!1});this._selectLayerTable.placeAt(this.drawToolSelectableLayerContainer);this._selectLayerTable.startup()},_populateSelectableLayer:function(){a.forEach(this._totalLayers,f.hitch(this,function(a){var b;b=!1;this.config&&this.config.drawToolSelectableLayers&&-1<this.config.drawToolSelectableLayers.indexOf(a.id)&&(b=!0);this._selectLayerTable.addRow({selectable:b,
selectableLayerName:a.title,selectableLayerID:a.id})}))},_addLayerLabel:function(a,b){var d,e;d=q(".simple-table-cell",a)[1];z.add(d,"esriCTLayerInputCell");e=new c({"class":"esriCTLayerLabelTextBox"});e.placeAt(d);e.startup();a.labelText=e;b&&a.labelText.set("value",b)},_populateLayerTableRow:function(b,c){var d,e,g,h,k;d=this._addLayerTable.addRow({});if(d.success&&d.tr){d=d.tr;e=b.selectedFields;if(!e){e={};if(h=b.getPopupInfo())g=h.fieldInfos;k=b.layerObject.fields;a.forEach(g,f.hitch(this,function(c){c.visible&&
c.fieldName.toLowerCase()!==b.layerObject.objectIdField.toLowerCase()&&a.forEach(k,f.hitch(this,function(a){c.fieldName===a.name&&(c=f.clone(c),c.label=null,e[c.fieldName]=c)}))}));0===Object.keys(e).length&&(e=null)}this._validateFields(e,d);d.layerInfo=b;d.selectedFields=e;this._addLayerLabel(d,b.label);this._addLayerDropDown(d,b,c)}},_validateFields:function(a,b){var c;(c=q(".simple-table-cell",b)[2])&&!a?(b.errorDiv||(b.errorDiv=p.create("div",{"class":"esriCTFieldError"},c),b.errorSpan=p.create("span",
{"class":"jimu-icon jimu-icon-error",title:this.nls.errorMsg.noFieldSelected},b.errorDiv)),z.remove(b.errorSpan,"esriCTHidden")):this._enableOk(b)},_enableOk:function(a){a&&a.errorSpan&&(z.add(a.errorSpan,"esriCTHidden"),q(".esriCTFieldError",this.addLayerTableNode).length===q(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length&&(a=e(".button-container")[0],K.set(a.children[2],"display","inline-block"),K.set(a.children[3],"display","none")))},_addLayerButtonClicked:function(){this.loading.show();
var a;z.contains(this.btnAddLayer,"esriCTDisabled")||(a=this._pickUnusedLayer(),this._populateLayerTableRow(a[0],!0))},_pickUnusedLayer:function(){return this._idsOfSelectedLayers.length<this._totalLayers.length?a.filter(this._totalLayers,f.hitch(this,function(a){return 0>this._idsOfSelectedLayers.indexOf(a.id)})):this._totalLayers},_addLayerDropDown:function(a,c,d){var e,g,h;a.layerSelector&&a.layerSelector.destroy();g=this._createLayerChooserMapArgs();h=new F(g);h.startup();e=q(".simple-table-cell",
a)[0];z.add(e,"esriCTLayerInputCell");h=new H({layerChooser:h});h.placeAt(e);h.startup();a.layerSelector=h;if(c&&(h.setSelectedLayer(c),this._addLayer(a,c,d),g.createMapResponse.errors&&g.createMapResponse.errors[0]&&g.createMapResponse.errors[0].name&&"Error"===g.createMapResponse.errors[0].name&&null===h.getSelectedItem())){for(d=0;d<this.config.downloadSettings.layers.length;d++)if(c.url===this.config.downloadSettings.layers[d].url){this.config.downloadSettings.layers.splice(d,1);break}this._deleteLayer(a);
this._addLayerTable.deleteRow(a)}this.own(b(h,"selection-change",f.hitch(this,function(b){b&&0<b.length&&b[0]&&b[0].hasOwnProperty("id")?a.layerInfo&&b[0].id!==a.layerInfo.id&&(this._updateLayer(a,b),a.layerInfo=b[0]):(this._errorMessage(this.nls.errorMsg.errorInSelectingLayer),this._deleteLayer(a),this._addLayerTable.deleteRow(a))})))},_addLayer:function(a,b,c){b&&b.hasOwnProperty("id")&&(this._idsOfSelectedLayers.push(b.id),c&&this._setDownloadInfo(a))},_updateLayer:function(b,c){var d,e,g,h;this.loading.show();
this._idsOfSelectedLayers[b.rowIndex]=c[0].id;this._setDownloadInfo(b);d=this._layerInfosObj.getLayerInfoById(c[0].id);e={};if(c=d.getPopupInfo())g=c.fieldInfos;h=d.layerObject.fields;a.forEach(g,f.hitch(this,function(b){b.visible&&b.fieldName.toLowerCase()!==d.layerObject.objectIdField.toLowerCase()&&a.forEach(h,f.hitch(this,function(a){b.fieldName===a.name&&(b=f.clone(b),b.label=null,e[b.fieldName]=b)}))}));0===Object.keys(e).length&&(e=null);b.selectedFields=e;this._validateFields(b.selectedFields,
b);this.loading.hide()},_deleteLayer:function(a){this.loading.show();a.layerSelector&&a.layerSelector.destroy();this._removeDownloadInfo(a.rowIndex);this._idsOfSelectedLayers.splice(a.rowIndex,1);z.remove(this.btnAddLayer,"esriCTDisabled");this._enableOk(a);this.loading.hide();return!0},_validateMaxFeatureCount:function(){if(0<this.maxFeatureCountTextBox.get("value")&&this.maxFeatureCountTextBox.isValid())return!0;this._errorMessage(this.nls.errorMsg.errorInMaxFeatureCount,this.nls.analysisTab.analysisTabLabel);
return!1},_showErrorMsgforInvalidFields:function(){var a,b,c,d;c=this._addLayerTable.getRows();for(var f in c)if(d=c[f],a=e(".esriCTFieldError",d),b=e(".esriCTFieldError \x3e .esriCTHidden",d),a.length!==b.length){this._errorMessage(this.nls.analysisTab.invalidLayerErrorMsg+" "+d.layerSelector.getSelectedItem().name,this.nls.analysisTab.analysisTabLabel);break}},_validateCustomOptions:function(){var a=this._downloadTab.validateCustomOptions();return 0<a.length?(this._errorMessage(a[0],this.nls.downloadTab.downloadTabLabel),
!1):!0}})});